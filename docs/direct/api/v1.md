---
id: v1
title: Version 1
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Overview

### Base URL

All resource URIs referenced in this documentation have the following base:
```
https://pbx.sipcentric.com/api/v1
```

All API requests should be made over HTTPS, rather than over HTTP.

### Limits

To prevent individual applications from degrading the overall user experience, we limit the number of requests that can be made in any **60 minute** window to **1200 per user**.

This limit is not intended to restrict your creativity in any way, so if you need more please email support@sipcentric.com detailing your requirements. However, you are encouraged to cache information locally, wherever possible, and to design your application in a way which avoids unnecessary or repeat requests.

You can see your current status by checking the HTTP headers included in each response from us:

- `X-RateLimit-Limit`: the number of requests allowed per 60 minute window
- `X-RateLimit-Remaining`: the number of requests left for the 60 minute window
- `X-RateLimit-Reset`: the number of seconds before next reset

For example:
```
X-RateLimit-Limit: 1200
X-RateLimit-Remaining: 11
```

### HTTP Methods

Instead of defining its own, arbitrary methods, the Sipcentric API utilizes four standard HTTP methods for interaction with all resources as follows:

#### GET

*Retrieving* a representation of a resource is as easy as GETting its URI. A simple way to Test this is to type the URI of the desired resource into the address bar of your web browser.

##### Response Codes

| Status Code | Type              | Description                                                                                  |
|:------------|:------------------|:---------------------------------------------------------------------------------------------|
| 200         | Ok                | Your request was successful and the response body contains the representation.               |
| 304         | Not Modified      | The client's cached representation is still valid (conditional GET).                         |
| 401         | Unauthorized      | The credentials supplied are invalid, or insufficient to access the requested resource.      |
| 404         | Not Found         | No resource was found at the requested location.                                             |
| 429         | Too Many Requests | You have reached your request limit for the current time window.                             |
| 500         | Server Error      | Something went wrong our end. If the problem persists please contact support@sipcentric.com. |

#### POST

The POST method is used for *creating* resources. The representation of the object to be created should be contained within the request body, and the `Content-Type` header should be set according to the format you are sending, e.g. `application/xml` or `application/json`. See [Response Formats](#response-formats) for the formats we can accept.

##### Response Codes

| Status Code | Type               | Description                                                                                                                                                                   |
|:------------|:-------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 201         | Created            | The request was successful and the response body contains a representation of the newly-created resource. The `Location` header will also be populated with the resource URI. |
| 400         | Bad Request        | There is a problem with your request and/or your data has failed validation. See the response body for more details.                                                          |
| 401         | Unauthorized       | The credentials supplied are invalid, or insufficient to create the resource.                                                                                                 |
| 404         | Not Found          | The location to which you are POSTing does not exist.                                                                                                                         |
| 405         | Method Not Allowed | The specified resource cannot be POSTed to.                                                                                                                                   |
| 429         | Too Many Requests  | You have reached your request limit for the current time window.                                                                                                              |
| 500         | Server Error       | The server has responded with an error. If the problem persists please contact support@sipcentric.com.                                                                        |

#### PUT

You should use the PUT method to *update* or *modify* resources. A representation of the object and its updated properties should be included in the body, and the `Content-Type` header set according to the format of the representation you are sending. See [Response Formats](#response-formats) for the formats we can accept.

##### Response Codes

| Status Code | Type               | Description                                                                                                          |
|:------------|:-------------------|:---------------------------------------------------------------------------------------------------------------------|
| 200         | Ok                 | The resource was successfully updated and the response body contains its new representation.                         |
| 400         | Bad Request        | There is a problem with your request and/or your data has failed validation. See the response body for more details. |
| 401         | Unauthorized       | The credentials supplied are invalid, or insufficient to update the resource.                                        |
| 404         | Not Found          | The resource you are trying to update does not exist.                                                                |
| 405         | Method Not Allowed | The specified resource is read-only and does not allow updates.                                                      |
| 429         | Too Many Requests  | You have reached your request limit for the current time window.                                                     |
| 500         | Server Error       | The server has responded with an error. If the problem persists please contact support@sipcentric.com.               |

#### DELETE

Finally, where supported, resources may be *removed* using the DELETE method. Please be careful though, as deleted resources cannot be restored afterwards!

##### Response Codes

| Status Code | Type               | Description                                                                                                     |
|:------------|:-------------------|:----------------------------------------------------------------------------------------------------------------|
| 204         | Deleted            | The resource was successfully deleted. The response body will be empty as there is no representation to return. |
| 401         | Unauthorized       | The credentials supplied are invalid, or insufficient to delete the resource.                                   |
| 404         | Not Found          | The resource you are trying to remove does not exist.                                                           |
| 405         | Method Not Allowed | The specified resource is read-only or not removable.                                                           |
| 429         | Too Many Requests  | You have reached your request limit for the current time window.                                                |
| 500         | Server Error       | The server has responded with an error. If the problem persists please contact support@sipcentric.com.          |

#### Method Overloading

Not all HTTP libraries support the PUT and DELETE methods. However, it is possible to achieve the same outcome by using POST and including a `_method` query parameter in the request URL, with a value of either PUT or DELETE. For example, take the following DELETE request:

```
DELETE /customers/8425/numbers/44675
```

If your chosen library only supports GET or POST, this request can easily be simulated as follows:

```
POST /customers/8425/numbers/44675?_method=DELETE
```

### Authentication

Authentication to the Sipcentric API occurs via [HTTP Basic Authentication](http://en.wikipedia.org/wiki/Basic_authentication_scheme), with the same credentials as you would use to login to the web portal. Your credentials should be provided with every request.

Most HTTP libraries will handle Basic Authentication details automatically. To do it manually, include an `Authorization` header with a value of `Basic <credentials>` in every request, where “credentials” is a Base64-encoded version of the string "username:password". For example:

```
Authorization: Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==
```

As all Sipcentric accounts can have unlimited users, you may want to create a user specifically for the API, or for an application that uses the API.

Consumers of the API must authenticate at one of three levels:

- Extension User
- Company Admin
- Reseller

### Response Formats

We generally send (and receive) representations of objects in [JSON](http://en.wikipedia.org/wiki/JSON) format. There may be exceptions (in the case of sound files, for example), but these will be highlighted in the documentation specific to those resources.

For each request you should specify the `Accept` header, which we will evaluate and where possible, return a representation according to your preferred choice. For example:

```
Accept: application/json
```

Although including the `Accept` header in your request is the preferred method of specifying your desired representation format, it may not always be possible to include this header.

If an `Accept` header cannot be specified, you can append the desired type to the request URL instead, as in the example below.

```html
https://pbx.sipcentric.com/api/v1/customers/1234/calls.json
```

This will override any `Accept` headers that have been added by your client and, in the above example, return a JSON representation.

### List Resources

Some resources are in fact collections of other resources. For example, a list of all telephone
numbers assigned to a particular customer account can be found by querying (GETting) the
“phonenumbers” sub-resource. Similarly, new numbers can be added to the collection by POSTing to it.

#### Pagination

In some cases, lists of items can be quite long. To preserve bandwidth and reduce response time,
lists are instead divided across multiple pages. To assist with pagination, a list resource will always
contain the following information:

| Property   | Description                                    |
|:-----------|:-----------------------------------------------|
| totalItems | The total number of items in the collection.   |
| pageSize   | The number of items per page.                  |
| page       | The current page number.                       |
| items[]    | The items included in the current page.        |
| prevPage   | A link to the previous page (if it exists).    |
| nextPage   | A link to the next page (again, if it exists). |


<Tabs>
  <TabItem value="Bash" label="Example request:">



```
GET https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers?pageSize=5&page=2
```
</TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems": 21,
  "pageSize": 5,
  "page": 2,
  "items": [
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/2468",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/1365",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/4775",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/2164",
      ...
    },
    {
      "type": "did",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers/3647",
      ...
    }
  ],
  "prevPage": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers?pageSize=5&page=1",
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/1234/phonenumbers?pageSize=5&page=3"
}

```
  </TabItem>
</Tabs>

#### Query Parameters

Some list resources will have specific parameters that can be used to filter results (see individual resource
documentation for details). However as a minimum, all list resources support the following query
parameters:

| Parameter | Description                                              |
|:----------|:---------------------------------------------------------|
| pageSize  | The number of items per page (default 20 / maximum 200). |
| page      | The page number to return (default 1).                   |


For example, to limit results to 10 per page and return the second page:

`GET /customers/8425/phonenumbers?pageSize=10&page=2`


### Data Formats

#### Dates & Times

All dates and times are formatted according to the ISO 8601 profile. For example:

`2012-09-26T13:47:28Z`


## Customer Resources

### Customers

| Resource Information           |             |
|:-------------------------------|:------------|
| Location                       | /customers  |
| Rate Limited?                  | Yes         |
| Requests per rate limit window | 1200/hour   |
| Authentication                 | Basic Auth  |
| HTTP Method(s)                 | [GET](#get) , [POST](#post) |
| JSON Representation(s)         | customer    |
| Additional Formats             | None        |

The customers resource is the starting point for most account-level operations. Each customer instance represents an account on the Sipcentric platform - it encapsulates a single company/PBX and all of its sub-resources.

```bash exampleRepresentation

{
  "type": "customer",
  "id": "5",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/5",
  "created": "2010-12-21T08:30:31Z",
  "accountType": "BUSINESS",
  "company": "Sipcentric Ltd.",
  "firstName": "Fred",
  "lastName": "Test",
  "telephone": "07557000000",
  "email": "support@sipcentric.com",
  "address1": "The Oaks",
  "address2": "Ribbesford",
  "city": "Bewdley",
  "postcode": "98999",
  "country": "US",
  "properties": {},
  "enabled": true,
  "currency": "GBP",
  "links": {
      "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/5/outgoingcallerids",
      "endpoints": "https://pbx.sipcentric.com/api/v1/customers/5/endpoints",
      "preferences": "https://pbx.sipcentric.com/api/v1/customers/5/preferences",
      "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals",
      "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/5/creditstatus",
      "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/5/phonenumbers",
      "bargeGroups": "https://pbx.sipcentric.com/api/v1/customers/5/bargegroups",
      "callBundles": "https://pbx.sipcentric.com/api/v1/customers/5/callbundles",
      "linkedUsers": "https://pbx.sipcentric.com/api/v1/customers/5/linkedusers",
      "sounds": "https://pbx.sipcentric.com/api/v1/customers/5/sounds",
      "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/5/phonebook",
      "calls": "https://pbx.sipcentric.com/api/v1/customers/5/calls",
      "recordings": "https://pbx.sipcentric.com/api/v1/customers/5/recordings",
      "sms": "https://pbx.sipcentric.com/api/v1/customers/5/sms"
  },
  "partnerId": "1",
  "partnerCompany": "Nimvelo",
  "userEmailUpdatable": false
}
```

| Type: *customer*               |                                                                                                |
| :----------------------------- | :--------------------------------------------------------------------------------------------- |
| **Property**                   | **Description**                                                                                |
| type <br /> *required*         | The resource type ("customer"). <br /> *String*                                                |
| id <br /> *required*         | The unique id ("5"). <br /> *String*                                  |
| uri <br /> *read-only*         | URI of this instance. <br /> *String*                                                          |
| created <br /> *read-only*     | UTC time when the resource was created (ISO8601 format). <br /> *String*                       |
| accountType<br/>*read-only*    | The account types are:<br/>Business (**business**) - full hosted PBX with all the usual business features (call queues, IVRs etc) <br />Residential Plus (**residential**) - a cut down version aimed at home users, but still having the concept of extensions and ring groups to enable everyone in the home to have their own extension/number and use the mobile app etc.<br/>Residential (**wlr**) - a basic PSTN replacement service, having just a phone number and voicemail. No concept of extensions or mobile apps.|
| company <br /> *required*      | Name of the company on the account.  <br /> *String*                                           |
| firstName <br /> *required*    | Primary contact first name.  <br /> *String*                                                   |
| lastName <br /> *required*     | Primary contact last name.  <br /> *String*                                                    |
| telephone <br /> *required*    | Primary contact telephone number.  <br /> *String*                                             |
| email <br /> *required*        | Primary contact email address.  <br /> *String*                                                |
| address1 <br /> *required*     | Primary location address line 1.  <br /> *String*                                              |
| address2 <br /> *optional*     | Primary location address line 2.  <br /> *String*                                              |
| city <br /> *required*         | Primary location town/city.  <br /> *String*                                                   |
| postcode <br /> *required*     | Primary location postcode.  <br /> *String*                                                    |
| country <br /> *required*      | Primary location country. <br /> *String*                                                      |
| properties[] <br /> *optional* | A collection of customisable properties that could be used to store varying ids <br /> *Array* |
| enabled <br /> *required*      | enabled or not. <br /> *Boolean*                                                  |
| links[] <br /> *read-only*     | A collection of links to related sub-resources.  <br /> *Array*                                |
| partnerId <br /> *required*      | partner id ("1") <br /> *string*                                                  |
| partnerCompany <br /> *required*      | The Partner Company <br /> *string*                                      |
| userEmailUpdatable <br /> *required*      | Can the users receive Email updates <br /> *Boolean*                      |


#### List customers

`GET /customers`

Lists all customer accounts to which the authenticating user has access. When authenticated as an extension user or a company admin, this will only return their own account. However, when authenticated as a reseller, all customer accounts owned by that reseller will be returned.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers
```


  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash

HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 1,
  "page": 1,
  "items": [
  {
    "type": "customer",
    "id": "5",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/5",
    "created": "2010-12-21T08:30:31Z",
    "accountType": "BUSINESS",
    "company": "Sipcentric Ltd.",
    "firstName": "Fred",
    "lastName": "Test",
    "telephone": "07557000000",
    "email": "support@sipcentric.com",
    "address1": "The Oaks",
    "address2": "Ribbesford",
    "city": "Bewdley",
    "postcode": "98999",
    "country": "US",
    "properties": {},
    "enabled": true,
    "currency": "GBP",
    "links": {
        "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/5/outgoingcallerids",
        "endpoints": "https://pbx.sipcentric.com/api/v1/customers/5/endpoints",
        "preferences": "https://pbx.sipcentric.com/api/v1/customers/5/preferences",
        "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/5/timeintervals",
        "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/5/creditstatus",
        "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/5/phonenumbers",
        "bargeGroups": "https://pbx.sipcentric.com/api/v1/customers/5/bargegroups",
        "callBundles": "https://pbx.sipcentric.com/api/v1/customers/5/callbundles",
        "linkedUsers": "https://pbx.sipcentric.com/api/v1/customers/5/linkedusers",
        "sounds": "https://pbx.sipcentric.com/api/v1/customers/5/sounds",
        "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/5/phonebook",
        "calls": "https://pbx.sipcentric.com/api/v1/customers/5/calls",
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/5/recordings",
        "sms": "https://pbx.sipcentric.com/api/v1/customers/5/sms"
    },
    "partnerId": "1",
    "partnerCompany": "Nimvelo",
    "userEmailUpdatable": false
  }
]
}
```
 </TabItem>
</Tabs>

#### Get customer

`GET /customers/{customerId}`

Returns a single customer instance, providing the user is allowed access to that customer. In the case of company admin/extension users, the special ID of `me` can also be used to return the account to which the current user belongs.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/me
```


  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "customer",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-01-24T13:00:35Z",
    "accountType": "BUSINESS",
    "company": "Fred Test",
    "firstName": "Fred",
    "lastName": "Muteesa",
    "email": "Test@simwood.com",
    "country": "GB",
    "properties": {},
    "enabled": true,
    "currency": "GBP",
    "links": {
        "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids",
        "endpoints": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints",
        "preferences": "https://pbx.sipcentric.com/api/v1/customers/25/preferences",
        "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals",
        "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
        "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers",
        "bargeGroups": "https://pbx.sipcentric.com/api/v1/customers/25/bargegroups",
        "callBundles": "https://pbx.sipcentric.com/api/v1/customers/25/callbundles",
        "linkedUsers": "https://pbx.sipcentric.com/api/v1/customers/25/linkedusers",
        "sounds": "https://pbx.sipcentric.com/api/v1/customers/25/sounds",
        "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook",
        "calls": "https://pbx.sipcentric.com/api/v1/customers/25/calls",
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings",
        "sms": "https://pbx.sipcentric.com/api/v1/customers/25/sms"
    },
    "partnerId": "41",
    "partnerCompany": "Ops Team Test",
    "userEmailUpdatable": false
}
```
 </TabItem>
</Tabs>

#### Create a Customer

`POST /customers/{customerId}/customers/`

To create a new customer, a representation of a `customer` must be POSTed to the `customers` resource. The newly created `Customer` ID will then be included in the body of the response.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```bash
POST https://pbx.sipcentric.com/api/v1/customers/25/phonebook

{
"type": "customer",
"telephone":"03301229999",
"accountType": "BUSINESS",
"company": "Simwood",
"firstName": "Fred",
"lastName": "Test API",
"email": "Test@Test.com",
"address1": "Simwood House",
"address2": "Cube m4 Business Park",
"city": "Bristol",
"postcode": "BS16 1FX",
"country": "GB",
"properties": {
"customid" : "abc123"
},
"enabled": true,
"currency": "GBP",
"userEmailUpdatable": false
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 201 Created


{
    "type": "customer",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-24T11:18:36Z",
    "accountType": "BUSINESS",
    "company": "Simwood",
    "firstName": "Fred",
    "lastName": "Test API",
    "telephone": "03301229999",
    "email": "Test@Test.com",
    "address1": "Simwood House",
    "address2": "Cube m4 Business Park",
    "city": "Bristol",
    "postcode": "BS16 1FX",
    "country": "GB",
    "properties": {
        "customid": "abc123"
    },
    "enabled": true,
    "currency": "GBP",
    "links": {
        "outgoingCallerIds": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids",
        "endpoints": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints",
        "preferences": "https://pbx.sipcentric.com/api/v1/customers/25/preferences",
        "timeIntervals": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals",
        "creditStatus": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
        "phoneNumbers": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers",
        "bargeGroups": "https://pbx.sipcentric.com/api/v1/customers/25/bargegroups",
        "callBundles": "https://pbx.sipcentric.com/api/v1/customers/25/callbundles",
        "linkedUsers": "https://pbx.sipcentric.com/api/v1/customers/25/linkedusers",
        "sounds": "https://pbx.sipcentric.com/api/v1/customers/25/sounds",
        "phoneBook": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook",
        "calls": "https://pbx.sipcentric.com/api/v1/customers/25/calls",
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings",
        "sms": "https://pbx.sipcentric.com/api/v1/customers/25/sms"
    },
    "userEmailUpdatable": false
}

```
 </TabItem>
</Tabs>



### Phone Book

| Resource Information           |                                                                              |
|:-------------------------------|:-----------------------------------------------------------------------------|
| Location                       | /customers/{customerId}/phonebook                                            |
| Rate Limited?                  | Yes                                                                          |
| Requests per rate limit window | 1200/hour                                                                    |
| Authentication                 | Basic Auth                                                                   |
| HTTP Method(s)                 | [GET](#get) <br /> [POST](#post) <br /> [DELETE](#delete) <br /> [PUT](#put) |
| JSON Representation(s)         | phonebookentry                                                               |
| Additional Formats             | None                                                                         |

The phonebook sub-resource allows users to read and organize an account's shared phone book entries. Each entry is represented by a `phonebookentry`.

```bash exampleRepresentation
  {
      "type": "phonebookentry",
      "id": "84033",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/84033",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created": "2023-05-03T17:21:14Z",
      "name": "Test Contact",
      "phoneNumber": "256754999999",
      "email": "email@Test.com",
      "speedDial": 123,
      "priority": 0
  }
```

| Type: *phonebookentry*        |                                                                          |
|:------------------------------|:-------------------------------------------------------------------------|
| **Property**                  | **Description**                                                          |
| type <br /> *required*        | The resource type ("phonebookentry"). <br /> *String*                    |
| id <br /> *required*          | The resource id <br /> *string*                                          |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                    |
| parent <br /> *read-only*     | URI of parent of this instance<br /> *String*                            |
| created <br /> *read-only*    | UTC time when the resource was created (ISO8601 format). <br /> *String* |
| name <br /> *required*        | Full name of the contact.  <br /> *String*                               |
| phoneNumber <br /> *required* | Phone number of the contact.  <br /> *String*                            |
| email <br /> *optional*        | Email of the contact <br /> *String*                                    |
| speedDial <br /> *optional*   | Assigned speed-dial for this contact (1-9999). <br /> *Integer*          |
| priority <br /> *required*     | priority of this contact. -50 for low, 0 for normal, 50 for high  <br /> *String*                                |


#### List phone book entries

`GET /customers/{customerId}/phonebook`

Return a list of every `phonebookentry` on the customer account.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonebook?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "totalItems": 5,
    "pageSize": 2,
    "page": 1,
    "items": [
        {
            "type": "phonebookentry",
            "id": "84033",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/84033",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-05-03T17:21:14Z",
            "name": "Test Contact",
            "phoneNumber": "256754999999",
            "email": "email@Test.com",
            "speedDial": 123,
            "priority": -50
        },
        {
            "type": "phonebookentry",
            "id": "84039",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/84039",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-05-04T09:13:08Z",
            "name": "Fred Test 3",
            "phoneNumber": "256761303030",
            "priority": 0
        }
    ],
    "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook?pageSize=2&page=2"
}
```
 </TabItem>
</Tabs>

#### Read phone book entry

`GET /customers/{customerId}/phonebook/{entryId}`

Returns the instance of an individual `phonebookentry`.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonebook/773
```


  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "phonebookentry",
    "id": "84033",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/84033",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-03T17:21:14Z",
    "name": "Test Contact",
    "phoneNumber": "256754999999",
    "email": "email@Test.com",
    "speedDial": 123,
    "priority": -50
}

```
 </TabItem>
</Tabs>

#### Create phone book entry

`POST /customers/{customerId}/phonebook`

To create a new phone book entry, a representation of a `phonebookentry` must be POSTed to the `phonebook` resource. The newly created `phonebookentry` representation will then be included in the body of the response.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```bash
POST https://pbx.sipcentric.com/api/v1/customers/25/phonebook

{
  "type" : "phonebookentry",
  "name" : "Fred Mobile",
  "phoneNumber" : "07902000000",
  "priority" : 0
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 201 Created

{
    "type": "phonebookentry",
    "id": "84072",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonebook/84072",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-05T10:30:15Z",
    "name": "Fred Mobile",
    "phoneNumber": "07902000000",
    "priority": 0
}
```
 </TabItem>
</Tabs>

#### Update phone book entry

`PUT /customers/{customerId}/phonebook/{entryId}`

To update a `phonebookentry`, a representation of the updated `phonebookentry` must be PUT to that instance resource. The updated `phonebookentry` representation will then be returned in the body of the response.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```bash

PUT https://pbx.sipcentric.com/api/v1/customers/25/phonebook/716

{
  "type" : "phonebookentry",
  "name" : "Fred Mobile",
  "phoneNumber" : "07825000000",
  "speedDial" : 12
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash

HTTP/1.1 200 OK

{
  "type": "phonebookentry",
  "uri": "http://pbx.sipcentric.com/api/v1/customers/25/phonebook/716",
  "created" : "2014-03-10T13:38:00.000+0000",
  "name": "Fred Mobile",
  "phoneNumber": "07825000000",
  "speedDial": 12
}

```
</TabItem>
</Tabs>

#### Delete phone book entry

`DELETE /customers/{customerId}/phonebook/{entryId}`

To delete a `phonebookentry`, a DELETE request must be made to the instance resource.

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
DELETE https://pbx.sipcentric.com/api/v1/customers/25/phonebook/716
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 204 No Content
```
 </TabItem>
</Tabs>


### SMS

| Resource Information           |                                  |
|:-------------------------------|:---------------------------------|
| Location                       | /customers/{customerId}/sms      |
| Rate Limited?                  | Yes                              |
| Requests per rate limit window | 1200/hour                        |
| Authentication                 | Basic Auth                       |
| HTTP Method(s)                 | [GET](#get) <br /> [POST](#post) |
| JSON Representation(s)         | smsmessage                       |
| Additional Formats             | None                             |

The SMS sub-resource contains a record of every SMS message sent or received on the account, each item represented by a single `smsmessage`.

```bash
{
    "type": "smsmessage",
    "id": "31408968",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/31408968",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-03T17:27:59Z",
    "direction": "OUT",
    "from": "02031371636",
    "to": "07902000000",
    "body": "Hello M. confirm receipt of this sms",
    "sendStatus": "SENT",
    "deliveryStatus": 1,
    "cost": 0.080,
    "creditsUsed": 1
}
```

| Type: *smsmessage*                |                                                                                                                                                                                                                                                                                                   |
|:----------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                      | **Description**                                                                                                                                                                                                                                                                                   |
| type <br /> *required*            | The resource type ("smsmessage"). <br /> String*       |
| id <br /> *required*            | The of the resource type ("31408968"). <br /> *String*                   |
| uri <br /> *read-only*            | URI of this instance. <br /> *String*                                                   |
| created <br /> *read-only*        | UTC time when the resource was created (ISO8601 format). <br /> *String*         |
| direction <br /> *read-only*      | Direction of the message. <br /> *Enum: IN, OUT*         |
| from <br /> *required*            | Name or phone number of the sender. <br />    |
| to <br /> *required*              | Phone number of the recipient. <br /> *String*            |
| body  <br /> *required*           | The message body. <br /> *String*                |
| sendStatus <br /> *read-only*     | The send status of an outgoing message. <br /> *Enum: PENDING, SENT, FAILED*     |
| deliveryStatus <br /> *read-only* | The delivery status of an outgoing message (where available): <br /> 1 = Delivered to handset <br />  2 = Rejected from handset <br /> 4 = Buffered in transit (phone probably off / out of reception) <br />  8 = Accepted by SMS carrier <br />  16 = Rejected by SMS carrier  <br /> *Integer* |
| cost <br /> *read-only*           | Message cost in GBP. <br /> *Float*     |
| creditdUsed <br /> *required*            | Number of credits used. <br /> *String*                   |

#### List SMS messages

`GET /customers/{customerId}/sms`

Returns a list of every `smsmessage` on the account.

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sms?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK
{
    "totalItems": 3,
    "pageSize": 2,
    "page": 1,
    "items": [
        {
            "type": "smsmessage",
            "id": "31414341",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/31414341",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-05-05T10:48:45Z",
            "direction": "OUT",
            "from": "02031371636",
            "to": "07902000000",
            "body": "Hey, this API is awesome!",
            "sendStatus": "SENT",
            "deliveryStatus": 1,
            "cost": 0.080,
            "creditsUsed": 1
        },
        {
            "type": "smsmessage",
            "id": "31414338",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/31414338",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-05-05T10:45:07Z",
            "direction": "OUT",
            "from": "02031371636",
            "to": "07902000000",
            "body": "second check on you",
            "sendStatus": "SENT",
            "deliveryStatus": 1,
            "cost": 0.080,
            "creditsUsed": 1
        }
    ],
    "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/sms/?createdBefore=2023-05-05T10:51:13Z&pageSize=2&page=2"
}
```
 </TabItem>
</Tabs>

#### Get SMS Message

`GET /customers/{customerId}/sms/{smsId}`

Returns the instance of a specific `smsmessage`.

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://pbx.sipcentric.com/api/v1/customers/25/sms/253368
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "smsmessage",
    "id": "31408968",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/31408968",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-03T17:27:59Z",
    "direction": "OUT",
    "from": "02031371636",
    "to": "07902000000",
    "body": "Hello M. confirm receipt of this sms",
    "sendStatus": "SENT",
    "deliveryStatus": 1,
    "cost": 0.080,
    "creditsUsed": 1
}
```
 </TabItem>
</Tabs>
#### Send SMS

`POST /customers/{customerId}/sms`

To send a new SMS, simply POST a representation of a new `smsmessage` to the list resource. If successful, a representation of the newly created `smsmessage` will be returned in the body of the response. 

**NB** the From number has to be a number configured in your account.

<Tabs>
  <TabItem value="Bash" label="Example request:">

```bash
POST https://pbx.sipcentric.com/api/v1/customers/25/sms

{
  "type": "smsmessage",
  "to": "07902000000",
  "from": "01212854400",
  "body": "Hey, this API is awesome!"
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 201 Created

{
    "type": "smsmessage",
    "id": "31414341",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/sms/31414341",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "direction": "OUT",
    "from": "07902000000",
    "to": "01212854400",
    "body": "Hey, this API is awesome!",
    "sendStatus": "SENT",
    "cost": 0.080,
    "creditsUsed": 1
}
```
 </TabItem>
</Tabs>

### Calls

| Resource Information           |                                  |
|:-------------------------------|:---------------------------------|
| Location                       | /customers/{customerId}/calls    |
| Rate Limited?                  | Yes                              |
| Requests per rate limit window | 1200/hour                        |
| Authentication                 | Basic Auth                       |
| HTTP Method(s)                 | [GET](#get) <br /> [POST](#post) |
| JSON Representation(s)         | call                             |
| Additional Formats             | `text/csv`                       |

The calls sub-resource can be used to fetch the call history of an account, as well as to originate new calls. Each item is represented by a `call`.

The scope of a call can be:

- Local - between two endpoints on the same account.
- Domain - between two accounts on the Sipcentric network.
- External - to/from an external number on the PSTN.


```bash
        {
            "type": "call",
            "id": "209925287",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/calls/209925287",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-04-05T12:59:05Z",
            "scope": "EXTERNAL",
            "direction": "OUT",
            "from": "Fred Muteesa <100>",
            "to": "01912058750",
            "callerId": "02031371636",
            "callStarted": "2023-04-05T12:58:55Z",
            "outcome": "ANSWERED",
            "duration": 7,
            "cost": 0.010,
            "callId": "366e05e5-1680699535.1182575",
            "linkedId": "366e05e5-1680699535.1182575",
            "srcEndpoint": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83069",
            "final": true,
            "links": {
                "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings?linkedId=366e05e5-1680699535.1182575"
            },
        }
```

| Type: *call*                   |                                                                                                                                                                                                                                                                          |
|:-------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                   | **Description**                                                                                                                                                                                                                                                          |
| type <br /> *required*         | The resource type ("call"). <br /> *String*  |
| id <br /> *required*         | The unique if of the resource . <br /> *String*  |
| uri <br /> *read-only*         | URI of this instance. <br /> *String*     |
| parent <br /> *required*         | The url to the customer account . <br /> *String*  |
| created <br /> *read-only*     | UTC time when the resource was created (ISO8601 format). <br /> *String*     |
| scope <br /> *read-only*       | The scope of the call (see above for details). <br /> *Enum: LOCAL, DOMAIN, EXTERNAL*      |
| direction <br /> *read-only*   | Direction of the call. <br /> *Enum: IN, OUT*                       |
| from <br /> *required*         | The name and/or phone number of the caller. <br /> *String*                                                                                                                                                                                                              |
| to <br /> *required*           | The name and/or phone number of recipient. <br /> *String*           |
| callerId <br /> *required*         | The number presented as the caller ID <br /> *String*  |
| callStarted <br /> *read-only* | UTC time when the call started (ISO8601 format). <br /> *String*      |
| outcome <br /> *read-only*     | The final outcome of the call. <br /> *Enum: ANSWERED, NO_ANSWER, BUSY, FAILED*    |
| duration <br /> *read-only*    | The duration of the call in seconds. <br /> *Integer*                                                                                                                                                                                                                    |
| cost <br /> *read-only*        | The cost of the call in GBP. <br /> *Float*                                                                                                                                                                                                                              |
| callId <br /> *read-only*      | A unique ID for this call or call leg. <br /> *String*                                                                                                                                                                                                                   |
| linkedId <br /> *read-only*    | This ID is the same across all legs of an end-to-end call and can be used to group those multiple parts together. In an end-to-end call with multiple hops, the value of "linkedId" will always be equal to the "callId" of the first call in the chain. <br /> *String* |
| srcEndpoint <br /> *required*         | the end point that originated the call <br /> *String*  |
| final <br /> *required*         | True or False <br /> *Boolean*  |
| links[] <br /> *read-only*     | A collection of links to related sub-resources. <br /> *Array*                                                                                                                                                                                                           |

#### Get call history

`GET /customers/{customerId}/calls`

Making a GET request to the list resource will return a history of the calls made/received on an account. The returned list will contain a collection of `call` representations and may be filtered using the following (optional) query parameters:

| Query String Parameters | Type    | Description                                                                                                                                                                                    |
|:------------------------|:--------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| createdAfter            | String  | Include only records created after the specified. date/time                                                                                                                                    |
| createdBefore           | String  | Include only records created before the specified. date/time                                                                                                                                   |
| startedAfter            | String  | Include only records started after the specified. date/time                                                                                                                                    |
| startedBefore           | String  | Include only records started before the specified. date/time                                                                                                                                   |
| from                    | String  | Include only calls from a specific number. Currently supports exact match only (no wildcards).                                                                                                 |
| to                      | String  | Include only calls to a specific number. Currently supports exact match only (no wildcards).                                                                                                   |
| direction               | String  | Include only calls in a specific direction (in/out).                                                                                                                                           |
| includeLocal            | Boolean | Whether or not to include local (internal) calls. Default is 'false'. Note: only the outbound record is included for calls between endpoints, as the inbound record would be an exact replica. |
| endpointId              | Integer | Only include calls involving a specific endpoint ID. |


<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://pbx.sipcentric.com/api/v1/customers/25/calls?createdAfter=2014-03-10T13:30:00Z&pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems": 23686,
  "pageSize": 2,
  "page": 1,
  "items": [
    {
      "type": "call",
      "id": "7592432",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/calls/7592432",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:47:05.000+0000",
      "scope": "EXTERNAL",
      "direction": "IN",
      "from": "07557000000",
      "to": "Sales Group <500>",
      "callStarted": "2014-03-10T13:46:35.000+0000",
      "outcome": "NO_ANSWER",
      "duration": 0,
      "cost": 0,
      "callId": "ast01-1400142051.1562723",
      "linkedId": "ast01-1400142051.1562723",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings?linkedId=ast01-1400142051.1562723"
      }
    }, {
      "type": "call",
      "id": "7592434",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/calls/7592434",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "scope": "EXTERNAL",
      "direction": "OUT",
      "from": "Greg Sanderson <103>",
      "to": "07557000000",
      "callStarted": "2014-03-10T13:35:51.000+0000",
      "outcome": "ANSWERED",
      "duration": 60,
      "cost": 0.09,
      "callId": "ast01-1401721105.2847099",
      "linkedId": "ast01-1401721105.2847099",
      "links": {
        "recordings": "https://pbx.sipcentric.com/api/v1/customers/25/recordings?linkedId=ast01-1401721105.2847099"
      }
    } ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/calls?pageSize=2&page=2"
}
```
 </TabItem>
</Tabs>

#### Originate call

`POST /customers/{customerId}/calls`

To originate a new call, you should POST a new `call` representation containing the properties shown below, to the calls list resource.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
POST https://pbx.sipcentric.com/api/v1/customers/25/calls

{
  "type": "call",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/1234",
  "to": "07902000000"
}
```


  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK
```
 </TabItem>
</Tabs>

In the above example, a connection will first be established with the specified local endpoint ("endpoint"). We will then attempt to place a call to the remote destination ("to") and finally bridge the two together.

#### Phone Status (Do Not Disturb)

`GET /customers/{customerId}/endpoints/{endpointId}/phonestatus`

To check the current status of an endpoint, run the above - dndActive is a boolean that will confirm whether the endpoint is happy to accept calls.
NB: Regardless of how many devices are connected to an endpoint, if Do Not Disturb (dnd) is set, then no calls will be presented to the endpoint.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94/phonestatus
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
{
	"type": "phonestatus",
	"id": "94",
	"uri": "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94/phonestatus",
	"parent": "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94",
	"dndActive": false
}
```
 </TabItem>
</Tabs>


`PUT /customers/{customerId}/endpoints/{endpointId}/phonestatus`

To change the current status of an endpoint, please use a PUT as per the below.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
PUT  https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94/phonestatus

{
	"type": "phonestatus",
	"dndActive": true
}
```
  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK
```
 </TabItem>
</Tabs>

### Sounds

| Resource Information           |                                |
|:-------------------------------|:-------------------------------|
| Location                       | /customers/{customerId}/sounds |
| Rate Limited?                  | Yes                            |
| Requests per rate limit window | 1200/hour                      |
| Authentication                 | Basic Auth                     |
| HTTP Method(s)                 | [GET](#get) <br />             |
| JSON Representation(s)         | music <br /> prompt            |
| Additional Formats             | `audio/wav`                    |

The sounds sub-resource is a container for all sound files that have been added to an account. A sound file is in itself an abstract type and as such, each instance is represented by one of the concrete sub-types detailed below.

*Important: once a sound of a particular type has been created, its type cannot be changed - instead, it must be removed and re-added.*

#### Sound Types

##### Prompt

Represents a voice greeting or announcement and can be played, for example, on entry to a call queue or to give instructions about which keys to press in an IVR.

##### Music

Represents music which can be played when a caller is placed on hold or is waiting in a queue.

The properties of each sound type are listed below.


| Type: *prompt*             |                                                                          |
|:---------------------------|:-------------------------------------------------------------------------|
| **Property**               | **Description**                                                          |
| type <br /> *required*     | The resource type ("prompt"). <br /> *String*                            |
| id <br /> *required*       | The unique resource id ("prompt"). <br /> *String*                       |
| uri <br /> *read-only*     | URI of this instance. <br /> *String*                                    |
| created <br /> *read-only* | UTC time when the resource was created (ISO8601 format). <br /> *String* |
| name <br /> *read-only*    | Name of the prompt. <br /> *String*                                      |
| size <br /> *read-only*    | Size of the underlying file in bytes. <br /> *Long*                      |

| Type: *music*              |                                                                          |
|:---------------------------|:-------------------------------------------------------------------------|
| **Property**               | **Description**                                                          |
| type <br /> *required*     | The resource type ("music"). <br /> *String*                             |
| uri <br /> *read-only*     | URI of this instance. <br /> *String*                                    |
| created <br /> *read-only* | UTC time when the resource was created (ISO8601 format). <br /> *String* |
| name <br /> *read-only*    | Name assigned to the music. <br /> *String*                              |
| size <br /> *read-only*    | Size of the file in bytes. <br /> *Integer*                              |
| enabled <br /> *required*  | Whether or not the music is enabled and will play.  <br /> *Boolean*     |


#### List sounds

`GET /customers/{customerId}/sounds`

Returns all sounds, optionally filtered by the following query parameters:

| Query String Parameters | Type   | Description                                               |
|:------------------------|:-------|:----------------------------------------------------------|
| type                    | String | Include only a specific type of sound file (prompt/music) |

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/sounds?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems" : 6,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "prompt",
    "id": "1046",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1046",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created" : "2014-03-10T13:38:00.0000+0000",
    "name" : "thank-you-for-calling",
    "size" : 129612
  }, {
    "type" : "prompt",
    "id": "1035",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created" : "2014-03-10T13:37:00.0000+0000",
    "name" : "calls-may-be-recorded",
    "size" : 69426
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds?pageSize=2&page=2"
}
```
 </TabItem>
</Tabs>

#### Get sound

`GET /customers/{customerId}/sounds/{soundId}`

Returns the instance of a specific sound file.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type" : "prompt",
  "id": "1035",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/sounds/1035",
  "created" : "2014-03-10T13:37:00.0000+0000",
  "name" : "calls-may-be-recorded",
  "size" : 69426
}
```
 </TabItem>
</Tabs>

It is also possible to fetch a copy of the audio file itself, by including the `Accept` header:

`Accept: audio/wav`

See [Response Formats](#response-formats) for more information.


### Recordings

| Resource Information           |                                    |
|:-------------------------------|:-----------------------------------|
| Location                       | /customers/{customerId}/recordings |
| Rate Limited?                  | Yes                                |
| Requests per rate limit window | 1200/hour                          |
| Authentication                 | Basic Auth                         |
| HTTP Method(s)                 | [GET](#get)                        |
| JSON Representation(s)         | recording                          |
| Additional Formats             | `audio/wav`                        |

The recordings sub-resource provides a way to retrieve and manage the call recordings which are currently stored on an account. Each `recording` representation contains a set of properties which allow for easy indexing/searching based on the local endpoint, remote party ID, time of recording etc.

```bash  exampleRepresentation
{
  "type": "recording",
  "id": "1358371",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358371",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "direction": "IN",
  "partyId": "106",
  "started": "2014-05-14T15:41:25.000+0000",
  "size": 9615,
  "callId": "ast01-1400082083.1542464",
  "linkedId": "ast01-1400082083.1542464",
  "endpoint": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/2535"
}
```

| Type: *recording*            |                                                                                                                                                                   |
|:-----------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                 | **Description**                                                                                                                                                   |
| type <br /> *required*       | The resource type ("recording"). <br /> *String*                                                                                                                  |
| uri <br /> *read-only*       | URI of this instance. <br /> *String*                                                                                                                             |
| created <br /> *read-only*   | UTC time when the resource was created (ISO8601 format). <br /> *String*                                                                                          |
| direction <br /> *read-only* | Direction of the call.  <br /> *Enum: IN, OUT*                                                                                                                    |
| partyId <br /> *read-only*   | Username or phone number of the recorded party. <br /> *String*                                                                                                   |
| started <br /> *read-only*   | The time that the recorded call began (ISO8601 format). <br /> *String*                                                                                           |
| size <br /> *read-only*      | Size of the underlying file in bytes. <br /> *Integer*                                                                                                            |
| callId <br /> *read-only*    | A unique ID for each leg of the call. <br /> *String*                                                                                                             |
| linkedId <br /> *read-only*  | The unique ID of the call itself.  This ID is the same across all legs of a single call and can be used to link multiple legs of a call together. <br /> *String* |
| endpoint <br /> *read-only*  | URI to the endpoint that was recording the call. If the call was internal only the outbound endpoint URI will be returned <br /> *String*                         |


#### List recordings

`GET /customers/{customerId}/recordings`

Returns a list of recordings, optionally filtered by the following query parameters:

| Query String Parameters | Type   | Description                                                           |
|:------------------------|:-------|:----------------------------------------------------------------------|
| createdAfter            | String | Include only recordings created after the specified date/time.        |
| createdBefore           | String | Include only recordings created before the specified date/time.       |
| startedAfter            | String | Include only recordings which started after the specified date/time.  |
| startedBefore           | String | Include only recordings which started before the specified date/time. |
| callId                  | String | Include only recordings relating to a specific call leg.              |
| linkedId                | String | Include only recordings relating to calls with the same linked ID.    |

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/recordings?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems" : 5788,
  "pageSize" : 2,
  "page" : 1,
  "items" : [
    {
      "type" : "recording",
      "id": "1358372",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358372",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T14:09:00.0000+0000",
      "direction" : "OUT",
      "partyId" : "07557000000",
      "started" : "2014-03-10T14:07:00.0000+0000",
      "size" : 97365,
      "callId" : "ast01-1401721105.2847099",
      "linkedId" : "ast01-1401721105.2847099",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/1928"
    }, {
      "type" : "recording",
      "id": "1358371",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358371",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:42:00.0000+0000",
      "direction" : "IN",
      "partyId" : "07557000000",
      "started" : "2014-03-10T13:37:00.0000+0000",
      "size" : 9615,
      "callId" : "ast01-1400082083.1542464",
      "linkedId" : "ast01-1400082083.1542464",
      "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/2535"
    } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/recordings?pageSize=2&page=2"
}
```

 </TabItem>
</Tabs>

#### Get recording

`GET /customers/{customerId}/recordings/{recordingId}`

Fetches the instance of a specific recording.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358371
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type": "recording",
  "id": "1358371",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/recordings/1358371",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:42:00.0000+0000",
  "direction" : "IN",
  "partyId" : "07557000000",
  "started" : "2014-03-10T13:37:00.0000+0000",
  "size" : 9615,
  "callId" : "ast01-1400082083.1542464",
  "linkedId" : "ast01-1400082083.1542464",
  "endpoint" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/2535"
}
```
 </TabItem>
</Tabs>

It is also possible to fetch a copy of the audio file itself, by including the `Accept` header:

`Accept: audio/wav`

See [Response Formats](#response-formats) for more information.


### Time Intervals

| Resource Information           |                                       |
|:-------------------------------|:--------------------------------------|
| Location                       | /customers/{customerId}/timeintervals |
| Rate Limited?                  | Yes                                   |
| Requests per rate limit window | 1200/hour                             |
| Authentication                 | Basic Auth                            |
| HTTP Method(s)                 | [GET](#get)                           |
| JSON Representation(s)         | timeinterval                          |
| Additional Formats             | None                                  |

A time interval (`timeinterval`) defines the single or set of time periods which together, constitute a recurring weekly/yearly event or work pattern - for example, "Out of Hours", "Public Holidays" or "My Cat's Birthday". Time intervals are used for matching against when defining time-based routing or access rules elsewhere on the system.

```bash exampleRepresentation
{
  "type": "timeinterval",
  "id": "431",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/431",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "name": "Lunchtimes",
  "repeat": "WEEKLY",
  "includedTimes" : [ {
    "dayOfWeek" : "MON",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "TUE",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "WED",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "THU",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "FRI",
    "startTime" : "12:15",
    "endTime" : "13:14"
  } ]
}
```

| Type: *timeinterval*                                       |                                                                                                                                                                                                                                                                        |
|:-----------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                                               | **Description**                                                                                                                                                                                                                                                        |
| type <br /> *required*                                     | The resource type ("timeinterval"). <br /> *String*                                                                                                                                                                                                                    |
| id <br /> *required*                                       | request of this instance. <br /> *String*              |
| uri <br /> *read-only*                                     | URI of this instance. <br /> *String*              |
| parent <br /> *read-only*                                     | URI of this customer account. <br /> *String*              |
| created <br /> *read-only*                                 | UTC time when the resource was created (ISO8601 format). <br /> *String*                                                                                                                                                                                               |
| name <br /> *required*                                     | Name assigned to the time interval. <br /> *String*                                                                                                                                                                                                                    |
| repeat <br /> *required*                                   | The repeat frequency. <br /> *Enum: WEEKLY, YEARLY*                                                                                                                                                                                                                    |
| includedTimes[] <br /> *required*                          | The times included in this event or work pattern. Each item defines an inclusive block of time on a single day of the week or year, depending on the repeat frequency. Include as many items as required to define the entire pattern or set of events. <br /> *Array* |
| includedTimes[].dayOfWeek <br /> *conditionally required*  | Day of the week on which this block applies. Only valid when repeat = WEEKLY. <br /> *Enum: MON, TUE, WED, THU, FRI, SAT, SUN*                                                                                                                                         |
| includedTimes[].month <br /> *conditionally required*      | Used in conjunction with "dayOfMonth", defines the day of the year on which this block applies. Only valid when repeat = YEARLY. <br /> *Enum: JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, DEC*                                                             |
| includedTimes[].dayOfMonth <br /> *conditionally required* | Used in conjunction with "month", defines the day of the year on which this block applies. Only valid when repeat = YEARLY. <br /> *Integer*                                                                                                                           |
| includedTimes[].startTime <br /> *required*                | Inclusive start time (hh:mm format). <br /> *String*                                                                                                                                                                                                                   |
| includedTimes[].endTime <br /> *required*                  | Inclusive end time (hh:mm format). <br /> *String*                                                                                                                                                                                                                     |


#### List time intervals

`GET /customers/{customerId}/timeintervals`

Returns a list of previously defined time intervals on an account.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/timeintervals?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems" : 5,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "timeinterval",
     "id": "32",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/32",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created" : "2014-03-10T13:37:00.000+0000",
    "name" : "Christmas Day",
    "repeat" : "YEARLY",
    "includedTimes" : [ {
      "month" : "DEC",
      "dayOfMonth" : 25,
      "startTime" : "00:00",
      "endTime" : "23:59"
    } ]
  }, {
    "type" : "timeinterval",
     "id": "8675",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/31",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created" : "2014-03-10T13:27:00.000+0000",
    "name" : "Office Hours",
    "repeat" : "WEEKLY",
    "includedTimes" : [ {
      "dayOfWeek" : "MON",
      "startTime" : "09:00",
      "endTime" : "17:29"
    }, {
      "dayOfWeek" : "TUE",
      "startTime" : "09:00",
      "endTime" : "17:29"
    }, {
      "dayOfWeek" : "WED",
      "startTime" : "09:00",
      "endTime" : "17:29"
    }, {
      "dayOfWeek" : "THU",
      "startTime" : "09:00",
      "endTime" : "17:29"
    }, {
      "dayOfWeek" : "FRI",
      "startTime" : "09:00",
      "endTime" : "16:59"
    } ]
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals?pageSize=2&page=2"
}
```
 </TabItem>
</Tabs>


#### Get time interval

`GET /customers/{customerId}/timeintervals/{timeIntervalId}`

Returns the instance of a specific time interval.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/431
```


  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type": "timeinterval",
   "id": "431",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/431",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "name": "Lunchtimes",
  "repeat": "WEEKLY",
  "includedTimes" : [ {
    "dayOfWeek" : "MON",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "TUE",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "WED",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "THU",
    "startTime" : "12:30",
    "endTime" : "13:29"
  }, {
    "dayOfWeek" : "FRI",
    "startTime" : "12:15",
    "endTime" : "13:14"
  } ]
}
```

 </TabItem>
</Tabs>

### Endpoints

| Resource Information           |                                                                          |
|:-------------------------------|:-------------------------------------------------------------------------|
| Location                       | /customers/{customerId}/endpoints                                        |
| Rate Limited?                  | Yes                                                                      |
| Requests per rate limit window | 1200/hour                                                                |
| Authentication                 | Basic Auth                                                               |
| HTTP Method(s)                 | [GET](#get) ,[POST](#post), [PUT](#put), [DELETE](#delete)               |
| JSON Representation(s)         | phone <br /> virtual <br /> group <br /> queue <br /> ivr <br /> mailbox |
| Additional Formats             | None                                                                     |


Endpoints represent the internal destinations to which calls can be routed. Some endpoints are also able to initiate calls. An endpoint is itself an abstract type - each concrete sub-type, listed below, inherits a set of properties common to all endpoints (such as "name" and "shortNumber"), whilst adding its own properties according to its functionality.

*Important: once an endpoint of a particular type has been created, its type cannot be changed.*

#### Endpoint Types

##### Phone Extension

For connecting a SIP handset, softphone or mobile app and to enable direct inbound/outbound calls over the Internet. Typically, each member of the team will have their own extension, but multiple devices may be connected to a single extension. Each phone extension includes an associated voicemail user and SIP identity and supports features such as call recording, call forwarding and call waiting. It can also be a member of one or more ring groups and/or call queues. *Note: call charges apply to forwarded calls.*

##### Virtual Extension

Used for linking an existing mobile or landline number to the system as if it were a regular extension, with its own 3-digit number for receiving incoming calls. A virtual extension can be a member of a group/queue in exactly the same way as a regular phone extension, but does not include any of the additional features (voicemail, recording etc). *Note: call charges apply to forwarded calls.*

##### Ring Group

Calls directed to a ring group will be forked to multiple phone/virtual extensions either in parallel, or cascaded from one to another in series. If one or more phones are busy the others will still ring.

##### Call Queue

On entry, callers may be greeted with a welcome message, then played music (or a custom marketing message) until their call is answered. Options include setting the ring strategy, maximum wait time and failover destination for calls exceeding this limit.

##### IVR (Auto-Attendant)

Direct callers to the most appropriate person or department by giving them a number of options - e.g. "Press 1 for support, 2 for accounts" - or allow callers to reach individual extensions directly if they know the number.

##### Additional Mailbox

Although every phone extension has its own mailbox, sometimes additional mailboxes are required for things like out-of-hours messages or recorded information lines. Messages may be delivered via email or retrieved from any connected handset on the system, in the same way as any other mailbox.


The properties of each endpoint type are listed below.

| Type: *phone*                      |                                                                                                                   |
|:-----------------------------------|:------------------------------------------------------------------------------------------------------------------|
| **Property**                       | **Description**                                                                                                   |
| type <br /> *required*             | The resource type ("phone"). <br /> *String*                                                                      |
| uri <br /> *read-only*             | URI of this instance. <br /> *String*                                                                             |
| created <br /> *read-only*         | UTC time when the resource was created (ISO8601 format). <br /> *String*                                          |
| shortNumber <br /> *required*      | The 3-digit internal number of this endpoint. <br /> *String*                                                     |
| name <br /> *required*             | Name assigned to the endpoint. <br /> *String*                                                                    |
| email <br /> *optional*            | Email address for notifications (e.g. voicemail). <br /> *String*                                                 |
| timeout <br /> *required*          | The time in seconds after which incoming calls should be considered unanswered (default 30). <br /> *Integer*     |
| callWaiting <br /> *required*      | Whether or not call waiting is enabled (default true). <br /> *Boolean*                                           |
| callRecording <br /> *required*    | Whether calls should be recorded for this extension and when (default OFF). <br /> *Enum: ALWAYS, OFF, ON_DEMAND* |
| voicemailEnabled <br /> *required* | Whether or not voicemail is enabled for this extension (default false). <br /> *Boolean*                          |
| links[] <br /> *read-only*         | A collection of links to related sub-resources. <br /> *Array*                                                    |

| Type: *virtual*                    |                                                                                                      |
|:-----------------------------------|:-----------------------------------------------------------------------------------------------------|
| **Property**                       | **Description**                                                                                      |
| type <br /> *required*             | The resource type ("virtual"). <br /> *String*                                                       |
| uri <br /> *read-only*             | URI of this instance. <br /> *String*                                                                |
| created <br /> *read-only*         | UTC time when the resource was created (ISO8601 format). <br /> *String*                             |
| shortNumber <br /> *required*      | The 3-digit internal number of this endpoint. <br /> *String*                                        |
| name <br /> *required*             | Name assigned to the endpoint. <br /> *String*                                                       |
| destination <br /> *required*      | External number to which calls should be forwarded. <br /> *String*                                  |
| timeout <br /> *required*          | The time in seconds after which calls should be considered unanswered (default 30). <br /> *Integer* |
| screeningEnabled <br /> *required* | Whether or not call screening is enabled (default false).  <br /> *Boolean*                          |

| Type: *group*                         |                                                                                                                                                                                                                                                                                        |
|:--------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                          | **Description**                                                                                                                                                                                                                                                                        |
| type <br /> *required*                | The resource type ("group"). <br /> *String*                                                                                                                                                                                                                                           |
| uri <br /> *read-only*                | URI of this instance. <br /> *String*                                                                                                                                                                                                                                                  |
| created <br /> *read-only*            | UTC time when the resource was created (ISO8601 format). <br /> *String*                                                                                                                                                                                                               |
| shortNumber <br /> *required*         | The 3-digit internal number of this endpoint. <br /> *String*                                                                                                                                                                                                                          |
| name <br /> *required*                | Name assigned to the endpoint. <br /> *String*                                                                                                                                                                                                                                         |
| memberTimeout <br /> *required*       | How long in seconds to try each member of the group (default 30). <br /> *Integer*                                                                                                                                                                                                     |
| cascadeDelay <br /> *required*        | Delay in seconds before trying the next member of the group (default 0). A zero delay denotes a ring-all strategy (ring all members simultaneously). An overlap between members can be achieved by setting the delay greater than zero but less than "memberTimeout". <br /> *Integer* |
| failoverDestination <br /> *optional* | URI of another endpoint to which calls should be forwarded on eventual timeout or failure. <br /> *String*                                                                                                                                                                             |

| Type: *queue*                 |                                                                                                      |
|:------------------------------|:-----------------------------------------------------------------------------------------------------|
| **Property**                  | **Description**                                                                                      |
| type <br /> *required*        | The resource type ("queue"). <br /> *String*                                                         |
| id <br /> *required*          | The resource id. <br /> *String*                                                         |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                                                |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*                            |
| created <br /> *read-only*    | UTC time when the resource was created (ISO8601 format). <br /> *String*                             |
| shortNumber <br /> *required* | The 3-digit internal number of this endpoint. <br /> *String*                                        |
| name <br /> *required*        | Name assigned to the endpoint. <br /> *String*                                                       |
| maxWait <br /> *required*     | The maximum amount of time in seconds a caller can wait in the queue (default 600). <br /> *Integer* |

| Type: *ivr*                                  |                                                                                                                                                                                                                                                                                                                                                                                                                      |
|:---------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                                 | **Description**                                                                                                                                                                                                                                                                                                                                                                                                      |
| type <br /> *required*                       | The resource type ("ivr"). <br /> *String*                                                                                                                                                                                                                                                                                                                                                                           |
| id <br /> *required*          | The resource id. <br /> *String*                                                         |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                                                |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*                            |
| created <br /> *read-only*                   | UTC time when the resource was created (ISO8601 format). <br /> *String*                                                                                                                                                                                                                                                                                                                                             |
| shortNumber <br /> *required*                | The 3-digit internal number of this endpoint. <br /> *String*                                                                                                                                                                                                                                                                                                                                                        |
| name <br /> *required*                       | Name assigned to the endpoint. <br /> *String*                                                                                                                                                                                                                                                                                                                                                                       |
| entrySound <br /> *required*                 | The URL of the [sound](https://developer.simwood.com/docs/direct/api/v1/#sounds) to play on entry. <br /> *String*                                                                                                                                                                                                                                                                                                   |
| items[] <br /> *required*                    | The items in this IVR menu, i.e. the keys the user can press and the corresponding actions to perform. <br /> *Array*                                                                                                                                                                                                                                                                                                |
| items[].key <br /> *required*                | The key the user can press. <br /> *String*                                                                                                                                                                                                                                                                                                                                                                          |
| items[].action <br /> *required*             | The action to perform. <br /> *Object*                                                                                                                                                                                                                                                                                                                                                                               |
| items[].action.type <br /> *required*        | The type of action to perform. <br/> transfer - transfers the caller to an endpoint of type "phone" or "virtual", optionally playing a sound first <br/> playsound - plays a sound and hangs up <br/> goto - transfers the caller to another endpoint of type "ivr" <br/> dialext - prompts the user for an extension and then transfers the caller to that number <br /> *Enum: transfer, playsound, goto, dialext* |
| items[].action.destination <br /> *required* | The URL of the [endpoint](https://developer.simwood.com/docs/direct/api/v1/#endpoints) to transfer to. Note that the type of the endpoint must match the type of the action - "transfer" transfers to "phone" or "virtual" endpoints and "goto" tranfers to "ivr" endpoints.  Only valid when type = transfer or type = goto. <br /> *String*                                                                        |
| items[].action.playSound <br /> *optional*   | The URL of the [sound](https://developer.simwood.com/docs/direct/api/v1/#sounds) to play before transferring. Only valid when type = transfer. <br /> *String*                                                                                                                                                                                                                                                       |
| items[].action.display <br /> *optional*     | A string to prepend to the caller ID when transferring.  Only valid when type = transfer. <br /> *String*                                                                                                                                                                                                                                                                                                            |
| items[].action.sound <br /> *required*       | The URL of the [sound](https://developer.simwood.com/docs/direct/api/v1/#sounds) to play before hanging up. Only valid when type = playsound. <br /> *String*                                                                                                                                                                                                                                                        |
| timeout <br /> *required*                    | The number of seconds to wait for a keypress after the initial message has been played (default 5). <br /> *Integer*                                                                                                                                                                                                                                                                                                 |

| Type: *mailbox*               |                                                                          |
|:------------------------------|:-------------------------------------------------------------------------|
| **Property**                  | **Description**                                                          |
| type <br /> *required*        | The resource type ("mailbox"). <br /> *String*                           |
| id <br /> *required*          | The resource id. <br /> *String*                                                         |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                                                |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*                            |
| created <br /> *read-only*    | UTC time when the resource was created (ISO8601 format). <br /> *String* |
| shortNumber <br /> *required* | The 3-digit internal number of this endpoint. <br /> *String*            |
| name <br /> *required*        | Name assigned to the endpoint. <br /> *String*                           |
| email <br /> *required*       | Email address to which we should send new messages. <br /> *String*      |
| links[] <br /> *read-only*    | A collection of links to related sub-resources. <br /> *Array*           |


#### List endpoints

`GET /customers/{customerId}/endpoints`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/endpoints?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems": 25,
  "pageSize": 2,
  "page": 1,
  "items":  [
     {
      "type": "ivr",
      "id": "83066",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:38:00.000+0000",
      "shortNumber": "001",
      "name": "Main IVR",
      "timeout": 4
    },
    {
      "type": "phone",
      "id": "101",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "shortNumber" : "102",
      "name" : "John Simmonds",
      "email" : "john@sipcentric.com",
      "timeout" : 30,
      "callWaiting" : true,
      "callRecording" : "ALWAYS",
      "voicemailEnabled" : true
    }
  ],
  "nextPage": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints?pageSize=1&page=2"
}
```
 </TabItem>
</Tabs>


#### Get endpoint

`GET /customers/{customerId}/endpoints/{endpointID}`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type": "phone",
  "id": "101",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "shortNumber" : "102",
  "name" : "John Simmonds",
  "email" : "john@sipcentric.com",
  "timeout" : 30,
  "callWaiting" : true,
  "callRecording" : "ALWAYS",
  "voicemailEnabled" : true,
  "links" : {
    "sip" : "http://pbx.sipcentric.com/api/v1/customers/25/endpoints/101/sip",
    "voicemail" : "http://pbx.sipcentric.com/api/v1/customers/25/endpoints/101/voicemail"
  }  
}
```
 </TabItem>
</Tabs>

#### List endpoints filterd by type.

`GET /customers/{customerId}/endpoints?type={endpointType}`

you might want to get all extensions or all ivrs that are on the account. In this case you send a GET request with a type parameter as shown below.

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://pbx.sipcentric.com/api/v1/customers/25/endpoints?type=phone
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash

{
    "totalItems": 2,
    "pageSize": 20,
    "page": 1,
    "items": [
        {
            "type": "phone",
            "id": "83069",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83069",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-01-24T17:12:05Z",
            "shortNumber": "100",
            "name": "Fred Muteesa",
            "timeout": 30,
            "callWaiting": false,
            "callRecording": "OFF",
            "defaultCallerId": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/49610",
            "voicemailSettings": {
                "autoAnswer": false,
                "pin": "0000",
                "playEnvelope": false,
                "playCallerId": false,
                "allowReview": false
            },
            "links": {
                "sip": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83069/sip",
                "forwardingRules": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83069/forwardingrules",
                "status": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83069/phonestatus"
            }
        },
        {
            "type": "phone",
            "id": "89937",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937",
            "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
            "created": "2023-05-15T19:43:10Z",
            "shortNumber": "102",
            "name": "Fred",
            "timeout": 30,
            "callWaiting": false,
            "callRecording": "OFF",
            "voicemailSettings": {
                "autoAnswer": false,
                "pin": "0000",
                "playEnvelope": false,
                "playCallerId": false,
                "allowReview": false
            },
            "links": {
                "sip": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937/sip",
                "forwardingRules": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937/forwardingrules",
                "status": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937/phonestatus"
            }
        }
    ]
}

```

 </TabItem>
</Tabs>

#### Updating an endpoint. 

`PUT /customers/{customerId}/endpoints/{endpointId} `

Depending on what property of the end point you want to update, you will need to send a PUT request to the following resrouce. You have to know the endpointID and the endpoint type. Depending on the endpoint type you are updating, some fields are required in the body, hence if you miss difinition of one of the parameters, your request will fail. In the example below I am updating the name of the IVR, but the rest of the fields I have included must be provided for the request to work.

<Tabs>
  <TabItem value="Bash" label="Example request:">
 

```
PUT https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83066

Json body
{"type":"ivr",
"id":"83066",
"name":"Fred-lab-ivr2",
"timeout":5,
"shortNumber":500
}

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "ivr",
    "id": "83066",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83066",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-01-24T16:43:22Z",
    "shortNumber": "500",
    "name": "Fred-lab-ivr2",
    "timeout": 5,
    "items": []
}

```
 </TabItem>
</Tabs>


#### Add an extension endpoint
To add an extention or phone type endpoint to an account, you need to send a POST request as shown below. Please not that some short numbers are reserved and can not be added as extensions. an example is **101**. the system will automatically return an error in case you try to add these numbers.


<Tabs>
  <TabItem value="Bash" label="Example request:">


```
POST https://pbx.sipcentric.com/api/v1/customers/{customerId}/endpoints

Body
{"callRecording":"OFF","timeout":30,"name":"Fred","shortNumber":"102","type":"phone"}

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash

HTTP/1.1 200 OK

{
    "type": "phone",
    "id": "89937",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-15T19:43:10Z",
    "shortNumber": "102",
    "name": "Fred",
    "timeout": 30,
    "callWaiting": false,
    "callRecording": "OFF",
    "voicemailSettings": {
        "autoAnswer": false,
        "pin": "0000",
        "playEnvelope": false,
        "playCallerId": false,
        "allowReview": false
    },
    "links": {
        "sip": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937/sip",
        "forwardingRules": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937/forwardingrules",
        "status": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937/phonestatus"
    }
}
```
 </TabItem>
</Tabs>


#### Delete Endpoint

`DELETE /customers/{customerId}/endpoints/{endpointId}`

To delete an endpoint all you need is the endpointId and CusomterId.
see example below:

Example Request

```
DELETE https://pbx.sipcentric.com/api/v1/customers/25/endpoints/83066
```




#### Phone Status

`GET /customers/{customerId}/endpoints/{endpointId}/phonestatus`

To check the current status of an endpoint, run the above - dndActive is a boolean that will confirm whether the endpoint is happy to accept calls.
NB: Regardless of how many devices are connected to an endpoint, if Do Not Disturb (dnd) is set, then no calls will be presented to the endpoint.

Example request:

```
GET https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94/phonestatus
```

```response
{
	"type": "phonestatus",
	"id": "94",
	"uri": "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94/phonestatus",
	"parent": "https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94",
	"dndActive": false
}
```


`PUT /customers/{customerId}/endpoints/{endpointId}/phonestatus`

To change the current status of an endpoint, please use a PUT as per the below.ss

Example request:

```
PUT  https://pbx.sipcentric.com/api/v1/customers/5/endpoints/94/phonestatus

{
	"type": "phonestatus",
	"dndActive": true
}
```
```response
HTTP/1.1 200 OK
```

### Phone Numbers

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/phonenumbers |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get), [POST](#post)           |
| JSON Representation(s)         | did                                  |
| Additional Formats             | None                                 |

Phone numbers provide a route into the system from outside - they can support calls and optionally SMS messages, where available. Each inbound number is represented by a `did`.

```bash exampleRepresentation
{
  "type" : "did",
  "id": "50",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/50",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number" : "01212854400",
  "identifier" : "",
  "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
  "smsEnabled" : true,
  "smsAllowIncoming" : true,
  "smsNotificationEmail" : "support@sipcentric.com",
  "smsNotificationUrl" : "https://example.com/sms",
  "faxEnabled" : false,
  "routingRules" : [ {
    "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/594",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
  }, {
    "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/625",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
  }, {
    "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/704",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
  } ]
}
```

| Type: *did*                                      |                                                                                                                                                                                                                                                                                        |
|:-------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Property**                                     | **Description**                                                                                                                                                                                                                                                                        |
| type <br /> *required*                           | The resource type ("did"). <br /> *String*                                                                                                                                                                                                                                             |
| id <br /> *required*          | The resource id. <br /> *String*                                                         |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                                                |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*                            |
| created <br /> *read-only*                       | UTC time when the resource was created (ISO8601 format). <br /> *String*                                                                                                                                                                                                               |
| number <br /> *read-only*                        | The phone number in E.164 format. <br /> *String*                                                                                                                                                                                                                                      |
| identifier <br /> *optional*                     | An optional label which is prefixed to the caller ID name on incoming calls to identify which number was called. Useful when multiple numbers each route to the same internal endpoint. <br /> *String*                                                                                |
| destination <br /> *optional*                    | The URI of the internal endpoint to which calls to this number will be routed by default. Valid only if faxEnabled = false. <br /> *String*                                                                                                                                            |
| smsEnabled <br /> *read-only*                    | Determines whether SMS functionality is supported on this number. Only certain numbers will have SMS capabilities. It is not possible to receive SMS messages on ported numbers. <br /> *Boolean*                                                                                      |
| smsAllowIncoming <br /> *conditionally required* | A user may choose whether to allow or disallow incoming messages. Valid only if smsEnabled = true. <br /> *Boolean*                                                                                                                                                                    |
| smsNotificationEmail <br /> *optional*           | The email address to which we should send incoming SMS notifications. Valid only if smsEnabled = true. <br /> *String*                                                                                                                                                                 |
| smsNotificationUrl <br /> *optional*             | When an SMS is received to this number, we will send a POST to the specified URL and include the following form encoded parameters: "to", "from", "body", "udh" (user data header - used for linking concatenated messages together). Valid only if smsEnabled = true. <br /> *String* |
| faxEnabled <br /> *required*                     | Whether this number should be designated for fax-to-email. It is not currently possible to receive both voice calls and faxes to a single number - therefore, "faxEnabled" and "destination" are mutually exclusive. <br /> *Boolean*                                                  |
| faxNotificationEmail <br /> *optional*           | The email address to which we should send incoming faxes (converted to PDF). Valid only if faxEnabled = true.                                                                                                                                                                          |
| routingRules[] <br /> *optional*                 | Time-based routing rules (exceptions) that apply to this number. <br /> *Array*                                                                                                                                                                                                        |
| routingRules[].timeInterval <br /> *required*    | URI of the time interval during which this rule applies. <br /> *String*                                                                                                                                                                                                               |
| routingRules[].destination <br /> *required*     | URI of endpoint to which calls during the matched time interval should routed. <br /> *String*                                                                                                                                                                                         |


#### List phone numbers

`GET /customers/{customerId}/phonenumbers`

Returns a list of all phone numbers on a customer account.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers?pageSize=2&page=1
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems" : 15,
  "pageSize" : 2,
  "page" : 1,
  "items" : [ {
    "type" : "did",
    "id": "47",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "01212854400",
    "identifier" : "Main",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "contact@Fredbloggs.com",
    "smsNotificationUrl" : "https://example.com/sms",
    "faxEnabled" : false
  }, {
    "type" : "did",
    "id": "50",
    "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/50",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created" : "2014-03-10T13:37:00.000+0000",
    "number" : "01212854411",
    "identifier" : "",
    "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/101",
    "smsEnabled" : true,
    "smsAllowIncoming" : true,
    "smsNotificationEmail" : "support@sipcentric.com",
    "smsNotificationUrl" : "https://example.com/sms",
    "faxEnabled" : false,
    "routingRules" : [ {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/594",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/625",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
    }, {
      "timeInterval" : "https://pbx.sipcentric.com/api/v1/customers/25/timeintervals/704",
      "destination" : "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/102"
    } ]
  } ],
  "nextPage" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers?pageSize=2&page=2"
}
```
 </TabItem>
</Tabs>

#### Get phone number

`GET /customers/{customerId}/phonenumbers/{numberId}`

Retrieves the instance of a specific phone number.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type" : "did",
  "id": "47",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/47",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number" : "01212854400",
  "identifier" : "Main",
  "smsEnabled" : true,
  "smsAllowIncoming" : true,
  "smsNotificationEmail" : "contact@Fredbloggs.com",
  "smsNotificationUrl" : "https://example.com/sms",
  "faxEnabled" : false
}
```
 </TabItem>
</Tabs>

#### Add a new Phone Number

`POST /customers/{customerId}/phonenumbers`

To add an availablenumber to a customer account please use a POST as per the below.
NB: This number should be available in the simwood inventory. you can check Available numbers api , to see available numbers.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
POST   https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers

 {
  "createFrom":"4-44-113-4037921",
  "type":"did"
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "did",
    "id": "94854",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-12T14:11:06Z",
    "number": "01134037921",
    "formatted": "0113 403 7921",
    "smsCapable": false,
    "faxEnabled": false,
    "links": {
        "routingRules": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854/routingrules"
    }
}
```
 </TabItem>
</Tabs>


#### Linking Phone Number to extension

`PUT /customers/{customerId}/phonenumbers/{phonenumberId}`

To link a phonenumber in a customer's account to an extension inside the customer account please use a PUT as per the example below.
"id" in the body is the ID of the phone number, and "destination" is the ID of the extension we want to link to.

NB: This phone number should already be added to the account.  Please see , adding Phone numbers.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```bash 
PUT https://pbx.sipcentric.com/api/v1/customers/{customerId}/phonenumbers/{phonenumberId}/

Body {
"type": "did",
"id": "73224",
"uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/{phonenumberId}",
"parent": "https://pbx.sipcentric.com/api/v1/customers/25",
"created": "2022-01-06T11:12:46Z",
"number": "01134031453",
"formatted": "0113 403 1453",
"smsCapable": false,
"faxEnabled": false,
"links": {
"routingRules": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/{phonenumberId}/routingrules"
},
"destination":"89937"
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "did",
    "id": "94854",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-12T14:11:06Z",
    "number": "01134037921",
    "formatted": "0113 403 7921",
    "destination": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937",
    "smsCapable": false,
    "faxEnabled": false,
    "links": {
        "routingRules": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854/routingrules"
    }
}
```

 </TabItem>
</Tabs>

#### UN-Linking Phone Number and extension


`PUT   /customers/{customerId}/phonenumbers/{phonenumberId}`

To un-link or remove the link between a phonenumber and an extension, you need to send another PUT request without detination in the body. 


<Tabs>
  <TabItem value="Bash" label="Example request:">


```bash 
PUT   https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854

Body
{
  "type":"did",
  "id":"94854",
  "uri":"https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854",
  "parent":"https://pbx.sipcentric.com/api/v1/customers/25",
  "created":"2023-05-12T14:11:06.000Z",
  "number":"01134037921",
  "formatted":"0113 403 7921",
  "smsCapable":false,
  "faxEnabled":false,
  "links":{
    "routingRules":"https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854/routingrules"
    }
  }
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "did",
    "id": "94854",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "created": "2023-05-12T14:11:06Z",
    "number": "01134037921",
    "formatted": "0113 403 7921",
    "destination": "https://pbx.sipcentric.com/api/v1/customers/25/endpoints/89937",
    "smsCapable": false,
    "faxEnabled": false,
    "links": {
        "routingRules": "https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854/routingrules"
    }
}
```
 </TabItem>
</Tabs>

#### Delete Phone Number 
`DELETE /customers/{customerId}/phonenumbers/{phonenumberId}`

To delete a number from an accouont, a DELETE request must be made to the instance resource.



Example
```
DELETE https://pbx.sipcentric.com/api/v1/customers/25/phonenumbers/94854

```



### Available Numbers

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/availablenumber |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)              |
| JSON Representation(s)         | availablenumber                         |
| Additional Formats             | None                                 |

The Available Numbers  sub-resource returns a list of available numbers that can be added to a customer account, represented by a `availablenumber` instance. After listing the available numbers you  can add a number to your account see. 

```bash exampleRepresentation
{
    "type": "availablenumber",
    "id": "4-44-113-4037921",
    "uri": "https://pbx.sipcentric.com/api/v1/availablenumbers/4-44-113-4037921",
    "country": "44",
    "areaCode": "113",
    "number": "4037921",
    "formatted": "0113 403 7921"
}
```



| Type: *availablenumber*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *required*        | The resource type ("availablenumber") <br /> *String*    |
| id <br /> *read-only*          | The resource availablenumber id this is the id you use to add number to your account<br /> *String*               |
| uri <br /> *read-only*        | URI to get this available number. <br /> *String*                 |
| country <br /> *read-only*     | Country code for the number("44") <br /> *date*           |
| areaCode <br /> *read-only* | Area Code for the number("113") <br /> *string* |
| number <br /> *read-only*   | these are the last 7 digits of the number("4037921") <br /> *string*                 |
| username <br /> *read-only*     | username for this user <br /> *string*                 |
| formated <br /> *read-only*     |the number formatted ("0113 403 7921")  <br /> *string*    |



#### Get availablenumber 

`GET /availablenumbers?areaCode=113&country=44&pageSize=100`


<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/availablenumbers?areaCode=113&country=44&pageSize=100&location=GB
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems": 21,
    "pageSize": 100,
    "page": 1,
    "items": [
        {
            "type": "availablenumber",
            "id": "4-44-113-4037921",
            "uri": "https://pbx.sipcentric.com/api/v1/availablenumbers/4-44-113-4037921",
            "country": "44",
            "areaCode": "113",
            "number": "4037921",
            "formatted": "0113 403 7921"
        },
        {
            "type": "availablenumber",
            "id": "4-44-113-4037924",
            "uri": "https://pbx.sipcentric.com/api/v1/availablenumbers/4-44-113-4037924",
            "country": "44",
            "areaCode": "113",
            "number": "4037924",
            "formatted": "0113 403 7924"
        },
        ......
    ]
}
```
 </TabItem>
</Tabs>

#### Get an available number

`GET /availablenumber/{availablenumberId}`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET  https://pbx.sipcentric.com/api/v1/availablenumbers/4-44-113-4037921
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "availablenumber",
    "id": "4-44-113-4037921",
    "uri": "https://pbx.sipcentric.com/api/v1/availablenumbers/4-44-113-4037921",
    "country": "44",
    "areaCode": "113",
    "number": "4037921",
    "formatted": "0113 403 7921"
}
```
 </TabItem>
</Tabs>



### Outgoing Caller IDs

| Resource Information           |                                           |
|:-------------------------------|:------------------------------------------|
| Location                       | /customers/{customerId}/outgoingcallerids |
| Rate Limited?                  | Yes                                       |
| Requests per rate limit window | 1200/hour                                 |
| Authentication                 | Basic Auth                                |
| HTTP Method(s)                 | [GET](#get)                               |
| JSON Representation(s)         | outgoingcallerid                          |
| Additional Formats             | None                                      |

Usually, when making calls or sending SMS messages from an account, the outgoing ID should be set to one of the phone numbers on that account. It is possible, however, to use a name (in the case of SMS) or a number which is hosted elsewhere, as long as ownership can be verified. Once a custom caller ID has been requested and approved by us it will appear here, represented by an `outgoingcallerid`.

```bash exampleRepresentation
{
  "type": "outgoingcallerid",
  "id": "114",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/114",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "07932000000",
  "allowCalls": false,
  "allowSms": true
}
```

| Type: *outgoingcallerid*      |                                                                                         |
|:------------------------------|:----------------------------------------------------------------------------------------|
| **Property**                  | **Description**                                                                         |
| type <br /> *required*        | The resource type ("outgoingcallerid"). <br /> *String*                                 |
| id <br /> *required*          | The resource id. <br /> *String*                                                        |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                                   |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*                                           |
| created <br /> *read-only*    | UTC time when the resource was created (ISO8601 format). <br /> *String*                |
| number <br /> *read-only*     | Name or number to be displayed for outgoing calls and/or messages. <br /> *String*      |
| allowCalls <br /> *read-only* | Whether the name/number has been approved for use with outgoing calls. <br /> *Boolean* |
| allowSms <br /> *read-only*   | Whether the name/number has been approved for use with outgoing SMS. <br /> *Boolean*   |


#### List outgoing caller ids

`GET /customers/{customerId}/outgoingcallerids`

Lists the IDs which have been approved for use on the account.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems": 2,
  "pageSize": 20,
  "page": 1,
  "items":  [
    {
      "type": "outgoingcallerid",
      "id": "115",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/115",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "Sipcentric",
      "allowCalls": false,
      "allowSms": true
    },
    {
      "type": "outgoingcallerid",
      "id": "114",
      "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/114",
      "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
      "created" : "2014-03-10T13:37:00.000+0000",
      "number": "01212854411",
      "allowCalls": true,
      "allowSms": true
    }
  ]
}
```
 </TabItem>
</Tabs>

#### Get outgoing caller id

`GET /customers/{customerId}/outgoingcallerids/{id}`

Get the instance of a specific caller ID.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/114
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type": "outgoingcallerid",
  "id": "114",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/outgoingcallerids/114",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created" : "2014-03-10T13:37:00.000+0000",
  "number": "01212854411",
  "allowCalls": true,
  "allowSms": true
}
```
 </TabItem>
</Tabs>

### Credit Status

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/creditstatus |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)                          |
| JSON Representation(s)         | creditstatus                         |
| Additional Formats             | None                                 |

The credit status sub-resource returns the current call credit status of an account, represented by a `creditstatus` instance.

```bash exampleRepresentation
{
  "type": "creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25",
  "accountType": "PREPAID",
  "creditRemaining": 19.571
}
```

| Type: *creditstatus*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *read-only*        | The resource type ("creditstatus") <br /> *String*    |
| uri <br /> *read-only*         | URI of this instance. <br /> *String*                 |
| accountType <br /> *read-only* | The type of account. <br /> *Enum: PREPAID, POSTPAID* |
| balance <br /> *read-only*     | Balance on the account <br /> *Float*                 |

#### Get credit status

`GET /customers/{customerId}/creditstatus`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/creditstatus
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type": "creditstatus",
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/creditstatus",
  "accountType": "PREPAID",
  "balance": 19.571
}
```
 </TabItem>
</Tabs>

### Call Bundles

| Resource Information           |                                     |
|:-------------------------------|:------------------------------------|
| Location                       | /customers/{customerId}/callbundles |
| Rate Limited?                  | Yes                                 |
| Requests per rate limit window | 1200/hour                           |
| Authentication                 | Basic Auth                          |
| HTTP Method(s)                 | [GET](#get)                         |
| JSON Representation(s)         | customerbundle                      |
| Additional Formats             | None                                |

The call bundles sub-resource contains all bundles which have been added to an account - each is represented by a `customerbundle` and includes the current status, as well as used and remaining minutes.

```bash exampleRepresentation
    {
      type: "customerbundle",
      id: "1040"
      uri: "https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040",
      parent: "https://pbx.sipcentric.com/api/v1/customers/25",
      created: "2014-03-01T00:00:00.000+0000",
      name: "1000 Mins - UK Local/National",
      inclusiveMins: 1000,
      priceMonthly: 5,
      validFrom: "2014-03-01T00:00:00.000+0000",
      validTo: "2014-03-31T23:59:59.999+0000",
      usedMins: 57,
      availableMins: 943,
      autoRenew: true,
      status: "ACTIVE"
    }
```

| Type: *customerbundle*           |                                                                                           |
|:---------------------------------|:------------------------------------------------------------------------------------------|
| **Property**                     | **Description**                                                                           |
| type <br /> *required*           | The resource type ("customerbundle"). <br /> *String*                                     |
| id <br /> *required*          | The resource id. <br /> *String*                                                        |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                                                   |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*                                           |
| created <br /> *read-only*       | UTC time when the resource was created (ISO8601 format). <br /> *String*                  |
| name <br /> *read-only*          | The bundle name. <br /> *String*                                                          |
| inclusiveMins <br /> *read-only* | The number of minutes to predefined destinations included in the bundle. <br /> *Integer* |
| priceMonthly <br /> *read-only*  | The monthly renewal cost in GBP. <br /> *Integer*                                         |
| validFrom <br /> *read-only*     | UTC time from which the bundle is valid (ISO8601 format). <br /> *String*                 |
| validTo <br /> *read-only*       | UTC time when the bundle expires (ISO8601 format). <br /> *String*                        |
| usedMins <br /> *read-only*      | The number of minutes used up. <br /> *Integer*                                           |
| availableMins <br /> *read-only* | The number of minutes remaining. <br /> *Integer*                                         |
| autoRenew <br /> *required*      | Whether the bundle is set to automatically renew. <br /> *Boolean*                        |
| status <br /> *read-only*        | The current status of the bundle. <br /> *Enum: ACTIVE, EXPIRED*                          |

#### List call bundles

`GET /customers/{customerId}/callbundles`

List all bundles added to an account.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/callbundles
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "totalItems": 1,
  "pageSize": 20,
  "page": 1,
  "items":  [
     {
      type: "customerbundle",
      id: "1040"
      uri: "https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040",
      parent: "https://pbx.sipcentric.com/api/v1/customers/25",
      created: "2014-03-01T00:00:00.000+0000",
      name: "1000 Mins - UK Local/National",
      inclusiveMins: 1000,
      priceMonthly: 5,
      validFrom: "2014-03-01T00:00:00.000+0000",
      validTo: "2014-03-31T23:59:59.999+0000",
      usedMins: 57,
      availableMins: 943,
      autoRenew: true,
      status: "ACTIVE"
    }
  ]
}
```
 </TabItem>
</Tabs>


#### Get call bundle

`GET /customers/{customerId}/callbundles/{bundleId}`

Fetches the instance of a specific customer bundle.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type": "customerbundle",
  "id": "1040"
  "uri": "https://pbx.sipcentric.com/api/v1/customers/25/callbundles/1040",
  "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
  "created": "2014-03-01T00:00:00.000+0000",
  "name": "1000 Mins - Local/National (Free)",
  "inclusiveMins": 1000,
  "priceMonthly": 5,
  "validFrom": "2014-03-01T00:00:00.000+0000",
  "validTo": "2014-03-31T23:59:59.999+0000",
  "usedMins": 57,
  "availableMins": 943,
  "autoRenew": true,
  "status": "ACTIVE"
}
```
 </TabItem>
</Tabs>

### Call Charging

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/callcharging |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)                          |
| JSON Representation(s)         | callcharging                         |
| Additional Formats             | None                                 |

The call charging  sub-resource returns the current call charging plan for an account, represented by a `callcharging` instance.

```bash exampleRepresentation
{
    "type": "customercallcharging",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/callcharging",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "chargingPlan": "https://pbx.sipcentric.com/api/v1/chargingplans/111",
    "postpaid": true,
    "creditLimit": 50.00,
    "warningThreshold": 0.00
}
```

| Type: *callcharging*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *read-only*        | The resource type ("callcharging") <br /> *String*    |
| id <br /> *required*          | The resource cutomer id. <br /> *String*                       |
| uri <br /> *read-only*        | URI of this instance. <br /> *String*                  |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*          |
| chargingPlan <br /> *read-only* | The URI to the customer's call charging plan . <br /> *string* |
| postpaid <br /> *read-only*     | Postpaid or prepaid <br /> *boolean*                 |
| creditLimit <br /> *read-only*     | Credit Limit  on the account <br /> *Float*                 |
| warningThreshold <br /> *read-only*   | The warning Threshold on the account <br /> *Float*                 |

#### Get callcharging plan

`GET /customers/{customerId}/callcharging`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/callcharging
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "customercallcharging",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/callcharging",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "chargingPlan": "https://pbx.sipcentric.com/api/v1/chargingplans/111",
    "postpaid": true,
    "creditLimit": 50.00,
    "warningThreshold": 0.00
}
```
 </TabItem>
</Tabs>


#### Updating callcharging plan for a customer

`PUT /customers/{customerId}/callcharging`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
PUT https://pbx.sipcentric.com/api/v1/customers/25/callcharging
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "customercallcharging",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/callcharging",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "chargingPlan": "https://pbx.sipcentric.com/api/v1/chargingplans/111",
    "postpaid": true,
    "creditLimit": 50.00,
    "warningThreshold": 0.00
}
```
 </TabItem>
</Tabs>


### Permissions

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/permissions |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)                          |
| JSON Representation(s)         | permissions                         |
| Additional Formats             | None                                 |

The  Permissions  sub-resource returns the current customer permissions for an account, represented by a `permissions` instance.

```bash exampleRepresentation
{
    "type": "customerpermissions",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/permissions",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "incomingCalls": true,
    "outgoingCalls": true,
    "internationalCalls": false,
    "addFeatures": true,
    "removeFeatures": true,
    "enableRecording": true
}
```

| Type: *permissions*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *read-only*        | The resource type ("permissions") <br /> *String*    |
| id <br /> *required*          | The resource customer id. <br /> *String*               |
| uri <br /> *read-only*        | URI to get customer permissions. <br /> *String*                 |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*           |
| incomingCalls <br /> *read-only* | Can account receive calls? <br /> *boolean* |
| outgoingCalls <br /> *read-only*   | Can the account make calls? <br /> *boolean*                 |
| internationalCalls <br /> *read-only*     | can the customer make international calls? <br /> *boolean*                 |
| addFeatures <br /> *read-only*     | Can the customer add features? <br /> *boolean*                 |
| removeFeatures <br /> *read-only*     | Can the customer remove features?<br /> *boolean*                 |
| enableRecording <br /> *read-only*     | Can the customer enable recording? <br /> *boolean*                 |

#### Get Customer Permissions

`GET /customers/{customerId}/permissions`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/permissions
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "customerpermissions",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/permissions",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "incomingCalls": true,
    "outgoingCalls": true,
    "internationalCalls": false,
    "addFeatures": true,
    "removeFeatures": true,
    "enableRecording": true
}
```
 </TabItem>
</Tabs>


### billing

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/billing |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)                          |
| JSON Representation(s)         | billing                         |
| Additional Formats             | None                                 |

The billing  sub-resource returns the current billing configuration and pricing plan for  different features, represented by a `billing` instance.

```bash exampleRepresentation
{
    "type": "billingaccount",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/billing",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "paymentsEnabled": false,
    "providersEnabled": [],
    "upgradeAllowed": true,
    "downgradeAllowed": true,
    "paymentMethodRequired": false,
    "currency": "GBP",
    "frequency": "MONTHLY",
    "nextBillingDate": "2023-06-01T01:00:00Z",
    "featurePricing": {
        "virtual": 0.00,
        "mailbox": 1.00,
        "ivr": 3.00,
        "phone": 11.00,
        "trunk": 8.50,
        "did": 2.00,
        "queue": 3.00,
        "group": 2.00
    },
    "links": {
        "invoices": "https://pbx.sipcentric.com/api/v1/customers/25/billing/invoices",
        "paymentMethods": "https://pbx.sipcentric.com/api/v1/customers/25/billing/paymentmethods",
        "estimate": "https://pbx.sipcentric.com/api/v1/customers/25/billing/estimate"
    }
}
```

| Type: *billing*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *read-only*        | The resource type ("billing") <br /> *String*    |
| uri <br /> *read-only*        | URI to get customer billing. <br /> *String*                 |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*           |
| paymentsEnabled <br /> *read-only* | is the account being billed? <br /> *boolean* |
| upgradeAllowed <br /> *read-only*   | Can the account upgrade <br /> *boolean*                 |
| downgradeAllowed <br /> *read-only*     | can account downgrade? <br /> *boolean*                 |
| paymentMethodRequired <br /> *read-only*     | is payment required for this account? <br /> *boolean*    |
| currency <br /> *read-only*     | account currency default is GBP<br /> *string*                 |
| frequency <br /> *read-only*     | billing frequence (Monthly) <br /> *string*                 |
| featurePricing <br /> *read-only*     | prices of the features  <br /> *string*                 |

#### Get billing 

`GET /customers/{customerId}/billing`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/billing
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "billingaccount",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/billing",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "paymentsEnabled": false,
    "providersEnabled": [],
    "upgradeAllowed": true,
    "downgradeAllowed": true,
    "paymentMethodRequired": false,
    "currency": "GBP",
    "frequency": "MONTHLY",
    "nextBillingDate": "2023-06-01T01:00:00Z",
    "featurePricing": {
        "virtual": 0.00,
        "mailbox": 1.00,
        "ivr": 3.00,
        "phone": 11.00,
        "trunk": 8.50,
        "did": 2.00,
        "queue": 3.00,
        "group": 2.00
    },
    "links": {
        "invoices": "https://pbx.sipcentric.com/api/v1/customers/25/billing/invoices",
        "paymentMethods": "https://pbx.sipcentric.com/api/v1/customers/25/billing/paymentmethods",
        "estimate": "https://pbx.sipcentric.com/api/v1/customers/25/billing/estimate"
    }
}
```
 </TabItem>
</Tabs>


### Estimates

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /estimates
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)                         |
| JSON Representation(s)         | estimates                      |
| Additional Formats             | None                                 |

The Available Charging Plans resource returns a list of charging plans that can be used, represented by a `estimates` instance.
This resource is used to set customers price plans. 



```bash exampleRepresentation
{
  "type" : "invoice",
  "id" : "E5",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/billing/estimate",
  "created" : "2023-05-17T15:22:38Z",
  "netAmount" : 133.00,
  "vatAmount" : 26.60,
  "total" : 159.60,
  "lines" : [ {
    "description" : "Phone Extension",
    "unitPrice" : 3.00,
    "quantity" : 31,
    "lineTotal" : 93.00,
    "usage" : false
  }, {
    "description" : "Virtual Extension",
    "unitPrice" : 0.00,
    "quantity" : 11,
    "lineTotal" : 0.00,
    "usage" : false
  }, 
  ......
   ],
  "date" : "2023-05-17T15:22:38Z",
  "credit" : false,
  "currency" : "GBP"
}
```



| Type: *estimates*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *required*        | The resource type ("invoice") <br /> *String*    |
| id <br /> *read-only*          | The resource estimate id (E5)<br /> *String*               |
| uri <br /> *read-only*        | URI to get this estimate. <br /> *String*                 |
| created <br /> *required*     | date when this estimate was created <br /> *date*        |
| netAmount <br /> *required* |  net amount <br /> *float* |
| vatAmount <br /> *requried*   |  vat charged<br /> *float*                 |
| total  <br /> *read-only*     | total charge <br /> *float*                 |
| lines <br /> *read-only*     | array or billable resources  <br /> *float*    |
| lines <br /> *read-only*     | array or billable resources  <br /> *array*    |
| description <br /> *read-only*     | name of resource  <br /> *float*    |
| unitPrice <br /> *read-only*     | the unit price of resrouce <br /> *float*    |
| quantity <br /> *read-only*     | number of resources  <br /> *integer*    |
| lineTotal <br /> *read-only*     |   <br /> *float*    |
| usage <br /> *read-only*     |whethere resource is usable or not <br /> *boolean*    |


#### Get estimates 

`GET /customers/{customerId}/billing/estimates/`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/5/billing/estimate
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type" : "invoice",
  "id" : "E5",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/billing/estimate",
  "created" : "2023-05-17T15:22:38Z",
  "netAmount" : 133.00,
  "vatAmount" : 26.60,
  "total" : 159.60,
  "lines" : [ {
    "description" : "Phone Extension",
    "unitPrice" : 3.00,
    "quantity" : 31,
    "lineTotal" : 93.00,
    "usage" : false
  }, {
    "description" : "Virtual Extension",
    "unitPrice" : 0.00,
    "quantity" : 11,
    "lineTotal" : 0.00,
    "usage" : false
  }, {
    "description" : "Additional Mailbox",
    "unitPrice" : 0.00,
    "quantity" : 3,
    "lineTotal" : 0.00,
    "usage" : false
  }, {
    "description" : "Ring Group",
    "unitPrice" : 0.00,
    "quantity" : 5,
    "lineTotal" : 0.00,
    "usage" : false
  }, {
    "description" : "Call Queue",
    "unitPrice" : 0.00,
    "quantity" : 7,
    "lineTotal" : 0.00,
    "usage" : false
  }, {
    "description" : "Voice Menu/IVR",
    "unitPrice" : 0.00,
    "quantity" : 7,
    "lineTotal" : 0.00,
    "usage" : false
  }, {
    "description" : "Public Number",
    "unitPrice" : 0.00,
    "quantity" : 34,
    "lineTotal" : 0.00,
    "usage" : false
  }, {
    "description" : "500 Mins - UK Mobile",
    "unitPrice" : 25.00,
    "quantity" : 1,
    "lineTotal" : 25.00,
    "usage" : false
  }, {
    "description" : "250 Mins - UK Mobile",
    "unitPrice" : 15.00,
    "quantity" : 1,
    "lineTotal" : 15.00,
    "usage" : false
  }, {
    "description" : "1000 Mins - Local/National (Free)",
    "unitPrice" : 0.00,
    "quantity" : 1,
    "lineTotal" : 0.00,
    "usage" : false
  } ],
  "date" : "2023-05-17T15:22:38Z",
  "credit" : false,
  "currency" : "GBP"
}

```

 </TabItem>
</Tabs>




### limits

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/limits |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get)                          |
| JSON Representation(s)         | limits                         |
| Additional Formats             | None                                 |

The limits  sub-resource returns the current limits on different features for an account , represented by a `limits` instance.

```bash exampleRepresentation
{
    "type": "customerlimits",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/limits",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "phone": 50,
    "group": 10,
    "queue": 10,
    "ivr": 10,
    "mailbox": 10,
    "trunk": 5,
    "did": 20,
    "channel": 5
}
```

| Type: *limits*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *read-only*        | The resource type ("customerlimits") <br /> *String*    |
| id <br /> *required*          | The resource customer id. <br /> *String*               |
| uri <br /> *read-only*        | URI to get customer limits. <br /> *String*                 |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*           |
| phone <br /> *read-only* | total numbers of phones <br /> *integer* |
| group <br /> *read-only*   | total number of groups <br /> *integer*                 |
| queue <br /> *read-only*     | total number of queues <br /> *integer*                 |
| ivr <br /> *read-only*     | total allowed ivrs <br /> *integer*    |
| mailbox <br /> *read-only*     | totalk mailboxes allowed<br /> *integer*                 |
| did <br /> *read-only*     | total DID's allowed <br /> *integer*                 |
| channel <br /> *read-only*     | total allowed channels <br /> *integer*                 |

#### Get limits 

`GET /customers/{customerId}/limits`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/limits
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "customerlimits",
    "id": "25",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/limits",
    "parent": "https://pbx.sipcentric.com/api/v1/customers/25",
    "phone": 50,
    "group": 10,
    "queue": 10,
    "ivr": 10,
    "mailbox": 10,
    "trunk": 5,
    "did": 20,
    "channel": 5
}
```
 </TabItem>
</Tabs>


### pricing

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/pricing |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get),[PUT](#put)              |
| JSON Representation(s)         | pricing                         |
| Additional Formats             | None                                 |

The pricing  sub-resource returns the current pricing or cost of different services for an account, represented by a `pricing` instance.

```bash exampleRepresentation
{
  "type" : "customerpricing",
  "id" : "25",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/pricing",
  "parent" : "https://pbx.sipcentric.com/api/v1/customers/25",
  "phone" : 2.00,
  "virtual" : 0.10,
  "group" : 4.00,
  "queue" : 4.00,
  "ivr" : 2.00,
  "mailbox" : 2.00,
  "did" : 3.00
}
```

| Type: *pricing*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *read-only*        | The resource type ("customerpricing") <br /> *String*    |
| id <br /> *required*          | The resource customer id. <br /> *String*               |
| uri <br /> *read-only*        | URI to get customer pricing. <br /> *String*                 |
| parent <br /> *read-only*     | URI of this customer account. <br /> *String*           |
| phone <br /> *read-only* | price of phone <br /> *float* |
| group <br /> *read-only*   | price  of groups <br /> *float*                 |
| queue <br /> *read-only*     | price of queues <br /> *float*                 |
| ivr <br /> *read-only*     | price of ivrs <br /> *float*    |
| mailbox <br /> *read-only*     | price of mailboex<br /> *float*                 |
| did <br /> *read-only*     |  price per DID<br /> *float*                 |


#### Get pricing 

`GET /customers/{customerId}/pricing`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/pricing
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type" : "customerpricing",
  "id" : "25",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/25/pricing",
  "parent" : "https://pbx.sipcentric.com/api/v1/customers/25",
  "phone" : 2.00,
  "virtual" : 0.10,
  "group" : 4.00,
  "queue" : 4.00,
  "ivr" : 2.00,
  "mailbox" : 2.00,
  "did" : 3.00
}
```
 </TabItem>
</Tabs>

`PUT /customers/{customerId}/pricing`

To change the current pricing, please use a PUT as per the below.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
PUT  https://pbx.sipcentric.com/api/v1/customers/5/pricing

{
  "type" : "customerpricing",
  "phone" : 7
}
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK
```
 </TabItem>
</Tabs>

### linkedusers

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/linkedusers |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get), [DELETE](#delete)             |
| JSON Representation(s)         | linkedusers                         |
| Additional Formats             | None                                 |

The Linked Users  sub-resource returns the users that are linked to an account, represented by a `linkedusers` instance.

```bash exampleRepresentation
{
    "type": "linkeduser",
    "id": "35180",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/linkedusers/35180",
    "created": "2023-01-24T13:24:12Z",
    "userId": "27068",
    "email": "Fred.muteesa+Test@simwood.com",
    "username": "fmuteesa",
    "accessLevel": "CUSTOMER",
    "enabled": true,
    "pending": false,
    "acceptedInvite": "2023-01-24T13:25:23Z",
    "owner": true,
    "recordingAccess": "ALL"
}
```

| Type: *linkedusers*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *required*        | The resource type ("customerlinkedusers") <br /> *String*    |
| id <br /> *read-only*          | The resource linkeduser id <br /> *String*               |
| uri <br /> *read-only*        | URI to get this linkeduser. <br /> *String*                 |
| created <br /> *read-only*     | date and timestamp when this user was created <br /> *date*           |
| userId <br /> *read-only* | Id of this user <br /> *string* |
| email <br /> *read-only*   | email of this user <br /> *string*                 |
| username <br /> *read-only*     | username for this user <br /> *string*                 |
| accessLevel <br /> *read-only*     | this user's access level <br /> *string*    |
| enabled <br /> *read-only*     | enabled or not <br /> *bolean*                 |
| pending <br /> *read-only*     |  price per DID<br /> *float*                 |
| acceptedInvite <br /> *read-only*     |  price per DID<br /> *float*                 |
| owner <br /> *read-only*     |  whether this user is the account owner or not<br /> *float*                 |
| recordingAccess <br /> *read-only*     |  can access all records<br /> *float*                 |


#### Get linkedusers 

`GET /customers/{customerId}/linkedusers`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/linkedusers
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "totalItems": 1,
    "pageSize": 20,
    "page": 1,
    "items": [
        {
            "type": "linkeduser",
            "id": "35180",
            "uri": "https://pbx.sipcentric.com/api/v1/customers/25/linkedusers/35180",
            "created": "2023-01-24T13:24:12Z",
            "userId": "27068",
            "email": "Fred.muteesa+Test@simwood.com",
            "username": "fmuteesa",
            "accessLevel": "CUSTOMER",
            "enabled": true,
            "pending": false,
            "acceptedInvite": "2023-01-24T13:25:23Z",
            "owner": true,
            "recordingAccess": "ALL"
        }
    ]
}
```
 </TabItem>
</Tabs>

#### Get a linkeduser 

`GET /customers/{customerId}/linkedusers/{linkeduserId}`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/linkedusers/35180
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "linkeduser",
    "id": "35180",
    "uri": "https://pbx.sipcentric.com/api/v1/customers/25/linkedusers/35180",
    "created": "2023-01-24T13:24:12Z",
    "userId": "27068",
    "email": "Fred.muteesa+Test@simwood.com",
    "username": "fmuteesa",
    "accessLevel": "CUSTOMER",
    "enabled": true,
    "pending": false,
    "acceptedInvite": "2023-01-24T13:25:23Z",
    "owner": true,
    "recordingAccess": "ALL"
}
```
 </TabItem>
</Tabs>

#### Get self linkeduser details
`GET /customers/{customerId}/linkedusers/me`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/customers/25/linkedusers/me
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
  "type" : "linkeduser",
  "uri" : "https://pbx.sipcentric.com/api/v1/customers/5/linkedusers/me",
  "userId" : "27062",
  "firstName" : "Fred",
  "lastName" : "Muteesa",
  "email" : "Fred.muteesa@simwood.com",
  "username" : "Fred@sipcentric",
  "accessLevel" : "ADMIN",
  "enabled" : true,
  "pending" : false,
  "owner" : false,
  "recordingAccess" : "NONE"
}
```
 </TabItem>
</Tabs>

#### Delete Linked User

```
DELETE /customers/{customerId}/linkedusers/{linkeduserId}?removeUser=true
```

There are 2 kinds of user: Web User (which is a single user-login) and Linked User (which is an association between Web User and an Account). So you can have a user on multiple accounts - e.g an IT Technician who supports 3 schools with their own accounts may have a single Web User but then will have Linked Users across 3 separate accounts.<br />
With the above in mind, when you **DELETE** a Linked User you only delete that association rather than the Web User too. You can still link the existing Web User to a new account in this scenario if you wish.
However, if you'd like to fully remove a user, when you submit your Linked User delete, add in an additional query parameter of *removeUser* with a value of true: "removeUser" : true

## Charging Plans

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /chargingPlans
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get) (PUT/POST/DELETE) - not allowed |
| JSON Representation(s)         | chargingplans                      |
| Additional Formats             | None                                 |

The Available Charging Plans resource returns a list of charging plans that can be used, represented by a `chargingplans` instance.
This resource is used to set customers price plans. 



```bash exampleRepresentation
 {
    "type": "chargingplan",
    "id": "1",
    "uri": "https://pbx.sipcentric.com/api/v1/chargingplans/1",
    "name": "Standard",
    "currency": "GBP",
    "domainCostMinute": 0.000,
    "roundSeconds": 1,
    "minDuration": 20,
    "minCharge": 0.000
}
```



| Type: *chargingplans*           |                                                       |
|:-------------------------------|:------------------------------------------------------|
| **Property**                   | **Description**                                       |
| type <br /> *required*        | The resource type ("chargingplans") <br /> *String*    |
| id <br /> *read-only*          | The resource chargingplans id<br /> *String*               |
| uri <br /> *read-only*        | URI to get this chargingplan. <br /> *String*                 |
| currency <br /> *required*     | The currency for this charging plan("GBP") <br /> *date*        |
| domainCostMinute <br /> *required* |  <br /> *float* |
| roundSeconds <br /> *requried*   |  <br /> *integer*                 |
| minDuration <br /> *read-only*     | minimum duration <br /> *integer*                 |
| minCharge <br /> *read-only*     | what is the charge per minute  <br /> *float*    |



#### Get chargingplans 

`GET /chargingplans/`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://pbx.sipcentric.com/api/v1/chargingplans/
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

"totalItems": 10,
    "pageSize": 20,
    "page": 1,
    "items": [
        {
            "type": "chargingplan",
            "id": "1",
            "uri": "https://pbx.sipcentric.com/api/v1/chargingplans/1",
            "name": "Standard",
            "currency": "GBP",
            "domainCostMinute": 0.000,
            "roundSeconds": 1,
            "minDuration": 20,
            "minCharge": 0.000
        },
        {
            "type": "chargingplan",
            "id": "36",
            "uri": "https://pbx.sipcentric.com/api/v1/chargingplans/36",
            "name": "Special - 4.5p Mobile / 0.5p Landline",
            "currency": "GBP",
            "domainCostMinute": 0.000,
            "roundSeconds": 1,
            "minDuration": 1,
            "minCharge": 0.010
        },
        ....
    ]
}
```
 </TabItem>
</Tabs>

#### Get a charging plan

`GET /chargingplans/{chargingplanId}`

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET  https://pbx.sipcentric.com/api/v1/chargingplans/8
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "chargingplan",
    "id": "8",
    "uri": "https://pbx.sipcentric.com/api/v1/chargingplans/8",
    "name": "Partner L2",
    "currency": "GBP",
    "domainCostMinute": 0.000,
    "roundSeconds": 1,
    "minDuration": 20,
    "minCharge": 0.000
}
```
 </TabItem>
</Tabs>

## Analytics

| Resource Information           |                                      |
|:-------------------------------|:-------------------------------------|
| Location                       | /customers/{customerId}/calls/stats  |
| Rate Limited?                  | Yes                                  |
| Requests per rate limit window | 1200/hour                            |
| Authentication                 | Basic Auth                           |
| HTTP Method(s)                 | [GET](#get) (PUT/POST/DELETE) - not allowed |
| JSON Representation(s)         | stats                      |
| Additional Formats             | None                                 |

This section will describe the analytics that you see on your default  dashboard in your account webui. 
We can use the sipcentric API to pull this information and get back results using API requests.
Below are examples of requests we can send. I will be explaining the meaning of the returned results for every example provided here. 

#### Total Duration
`GET customers/{customerId}/calls/stats?`


<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&metric=duration

``` 





  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&metric=duration",
    "columnHeaders": [
        {
            "name": "duration",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            108.0
        ]
    ],
    "totals": {
        "duration": 108.0
    }
}
```
 </TabItem>
</Tabs>

**Explanation:**
From the above results we see that the total Duration for account 5 is 108.0 seconds. on the Web ui this will be represented as *1 minute and 48 seconds*


#### Total cost

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&metric=cost 

```


  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK


{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&metric=cost",
    "columnHeaders": [
        {
            "name": "cost",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            0.0
        ]
    ],
    "totals": {
        "cost": 0.0
    }
}

```
 </TabItem>
</Tabs>

**Explanation:**
This request has returned the current total cost as £0.00



#### Inbound Vs Outbound Duration

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=direction&metric=duration
```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=direction&metric=duration",
    "columnHeaders": [
        {
            "name": "direction",
            "columnType": "DIMENSION"
        },
        {
            "name": "duration",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "in",
            0.0
        ],
        [
            "out",
            108.0
        ]
    ],
    "totals": {
        "duration": 108.0
    }
}

```
 </TabItem>
</Tabs>

**Explanation:**
From the above response we can see that inbound has 0 seconds and Outbound has 108.0 which gives us a total of 108.0 seconds 


#### Get Duration by Extension
This example will show us the total number of seconds consumed by exach extension. This is further categorized by inbound and outbound duration. 

<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=endpoint&metric=duration_in&metric=duration_out&endpointType=extension

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=endpoint&metric=duration_in&metric=duration_out&endpointType=extension",
    "columnHeaders": [
        {
            "name": "endpoint",
            "columnType": "DIMENSION"
        },
        {
            "name": "duration_in",
            "columnType": "METRIC"
        },
        {
            "name": "duration_out",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "Fred Test <102>",
            0.0,
            55.0
        ],
        [
            "Ivan Example <111>",
            0.0,
            0.0
        ],
        [
            "Jared Example <215>",
            53.0,
            0.0
        ]
    ],
    "totals": {
        "duration_in": 53.0,
        "duration_out": 55.0
    }
}

```
 </TabItem>
</Tabs>
**Explanation:**
In the above example, we see that  this week has had three exentions making or receiving calls. 
Fred, Ivan, Jared



#### Get Calls by Extensions
The request would give us the number of calls made or received by each extension in the account.


<Tabs>
  <TabItem value="Bash" label="Example request:">

```
GET 
https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=endpoint&metric=count_in&metric=count_out&endpointType=extension

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK


{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=endpoint&metric=count_in&metric=count_out&endpointType=extension",
    "columnHeaders": [
        {
            "name": "endpoint",
            "columnType": "DIMENSION"
        },
        {
            "name": "count_in",
            "columnType": "METRIC"
        },
        {
            "name": "count_out",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "Fred Test <102>",
            1.0,
            5.0
        ],
        [
            "Ivan Example <111>",
            1.0,
            0.0
        ],
        [
            "Jared Example <215>",
            3.0,
            1.0
        ]
    ],
    "totals": {
        "count_in": 5.0,
        "count_out": 6.0
    }
}
```
 </TabItem>
</Tabs>


**Explantion**
The above result shows us that we have received  5 calls and made 6 calls. You can also see that Fred received 1 call and made 5 calls.


#### Get Calls Outcome
This request gives you visibility into Call dispositions.  That is, what happened to the call, was it answered or not?
You are able to see the number Unanswered calls

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=outcome&metric=count&direction=in

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=outcome&metric=count&direction=in",
    "columnHeaders": [
        {
            "name": "outcome",
            "columnType": "DIMENSION"
        },
        {
            "name": "count",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "NO ANSWER",
            2.0
        ]
    ],
    "totals": {
        "count": 2.0
    }
}

```

 </TabItem>
</Tabs>

#### Get  Top Callers

You can use the exmaple below to see which number calls your DID's the most. 

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET 
https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=callerid&metric=count&sort=-count&scope=external&direction=in&limit=10

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=callerid&metric=count&sort=-count&scope=external&direction=in&limit=10",
    "columnHeaders": [
        {
            "name": "callerid",
            "columnType": "DIMENSION"
        },
        {
            "name": "count",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "07760431465",
            1.0
        ]
    ],
    "totals": {
        "count": 1.0
    }
}

```

 </TabItem>
</Tabs>


#### Get Average Wait Time

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=day&metric=avg_duration&endpointType=queue

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK


{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=day&metric=avg_duration&endpointType=queue",
    "columnHeaders": [
        {
            "name": "day",
            "columnType": "DIMENSION"
        },
        {
            "name": "avg_duration",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "2023-05-22T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-23T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-24T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-25T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-26T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-27T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-28T00:00:00.000+03:00",
            0.0
        ]
    ],
    "totals": {
        "avg_duration": "NaN"
    }
}

```
 </TabItem>
</Tabs>

#### Get Daily Calls

You can also see total calls per day of the week. 

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=day&metric=count_in&metric=count_out

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK

{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=day&metric=count_in&metric=count_out",
    "columnHeaders": [
        {
            "name": "day",
            "columnType": "DIMENSION"
        },
        {
            "name": "count_in",
            "columnType": "METRIC"
        },
        {
            "name": "count_out",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "2023-05-22T00:00:00.000+03:00",
            0.0,
            0.0
        ],
        [
            "2023-05-23T00:00:00.000+03:00",
            2.0,
            6.0
        ],
        [
            "2023-05-24T00:00:00.000+03:00",
            0.0,
            0.0
        ],
        [
            "2023-05-25T00:00:00.000+03:00",
            0.0,
            0.0
        ],
        [
            "2023-05-26T00:00:00.000+03:00",
            0.0,
            0.0
        ],
        [
            "2023-05-27T00:00:00.000+03:00",
            0.0,
            0.0
        ],
        [
            "2023-05-28T00:00:00.000+03:00",
            0.0,
            0.0
        ]
    ],
    "totals": {
        "count_in": 2.0,
        "count_out": 6.0
    }
}
```
 </TabItem>
</Tabs>

#### Get Daily Cost

You can also get information about how much you spend per day.

<Tabs>
  <TabItem value="Bash" label="Example request:">


```
GET https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=day&metric=cost

```

  </TabItem>
  <TabItem  value="result" label="Example Response">

```bash
HTTP/1.1 200 OK


{
    "type": "datatable",
    "uri": "https://my.nimvelo.com/api/v1/customers/5/calls/stats?startedAfter=2023-05-21T21:00:00.000Z&startedBefore=2023-05-28T20:59:59.999Z&timeZone=%2B03%3A00&dimension=day&metric=cost",
    "columnHeaders": [
        {
            "name": "day",
            "columnType": "DIMENSION"
        },
        {
            "name": "cost",
            "columnType": "METRIC"
        }
    ],
    "rows": [
        [
            "2023-05-22T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-23T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-24T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-25T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-26T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-27T00:00:00.000+03:00",
            0.0
        ],
        [
            "2023-05-28T00:00:00.000+03:00",
            0.0
        ]
    ],
    "totals": {
        "cost": 0.0
    }
}
```
 </TabItem>
</Tabs>


## Global Resources

### Token Generator

In some situations it's not possible to use basic authentication in a GET request, such as downloading a call recording in a client's browser.

To solve this issue we have added a token generator for pre-authenticating these requests. This will return a single-use token for accessing any readonly resources
you would normally have to authenticate for.

#### Get token

```bash 
GET https://pbx.sipcentric.com/api/v1/tokengenerator

{
  "type": "authtoken",
  "id": "318f9a6d-162e-4d46-89d2-3d7cb2f4db16",
  "created": "2014-07-11T15:11:12.477+0000",
  "expires": "2014-07-11T16:11:12.477+0000"
}
```

You can now use this token to get a call recording using the `tokenid` parameter in the GET request:

```
https://pbx.sipcentric.com/api/v1/customers/25/recordings/242348.wav?tokenid=318f9a6d-162e-4d46-89d2-3d7cb2f4db16
```

Anyone that tried to use the request again will get a 401 Unauthorized. This prevents replay attacks from getting any data.

### Stream

```
GET https://pbx.sipcentric.com/api/v1/stream
```

You can create a standing HTTP connection to our API for live streaming events. This means you can process events in near real time, without having to poll other resources and potentially avoid hitting request limits. Data is returned as JSON objects.

Currently the following is available via the streaming API:

- Incoming call notifications
- Incoming SMS messages
- SMS delivery receipts

Example object:

```bash
{
  "event": "incomingcall",
  "location": null,
  "values": {
    "callerIdNumber": "01234567890",
    "callerIdName": "Support",
    "endpoint": "/customers/325/endpoints/6874"
  }
}
```

#### Connecting

To work with the streaming API you will need to create an indefinite HTTP GET request and process the data as it is received. Our API will hold the connection open as long as possible. But if the connection does disconnect due to network / client issues you should handle this by reconnecting as soon as possible. We also send a heartbeat object every 60 seconds which helps keep the connection open and you can also check for this object and reconnect if it isn't received within a suitable time period.

The streaming API requires you to authenticate with Basic Authentication. The stream data you receive depends on the user you authenticate with.

The best way to work with the Stream in JavaScript/Node.js is to use the [Atmosphere client](https://github.com/Atmosphere/atmosphere-javascript) which establishes the connection and handles disconnects automatically.

Most HTTP client libraries let you handle the connection as a stream. Which allows you to process the data as it is received.

#### Responses

All of the event objects are in a standard format:

```bash
{
  "event": ...,
  "location": ...,
  "values":{ ... }
}
```


Current events that can be consumed:

- incomingcall
- smsreceived
- smsdelivered

Event values:

| Type: *incomingcall* |                                      |
|:---------------------|:-------------------------------------|
| **Property**         | **Description**                      |
| callerIdNumber       | The callers number. <br /> *String*  |
| callerIdName         | Caller ID <br /> *String*            |
| endpoint             | URI of the endpoint. <br /> *String* |

| Type: *smsreceived* |                                                             |
|:--------------------|:------------------------------------------------------------|
| **Property**        | **Description**                                             |
| to                  | The public number the SMS was delivered to. <br /> *String* |
| from                | The number the SMS was received from <br /> *String*        |
| excerpt             | Summary of message. <br /> *String*                         |

| Type: *smsdelivered* |                                         |
|:---------------------|:----------------------------------------|
| **Property**         | **Description**                         |
| None                 | No values are returned for this object. |
